{"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/main.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nvar _redis = _interopRequireDefault(require(\"./utils/redis\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n(async () => {\n  console.log(_redis.default.isAlive());\n  console.log(await _redis.default.get('myKey'));\n  await _redis.default.set('myKey', 12, 5);\n  console.log(await _redis.default.get('myKey'));\n  setTimeout(async () => {\n    console.log(await _redis.default.get('myKey'));\n  }, 1000 * 10);\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVkaXMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiY29uc29sZSIsImxvZyIsInJlZGlzQ2xpZW50IiwiaXNBbGl2ZSIsImdldCIsInNldCIsInNldFRpbWVvdXQiXSwic291cmNlUm9vdCI6Ii9yb290L0FMWC1CYWNrZW5kL2FseC1maWxlc19tYW5hZ2VyLyIsInNvdXJjZXMiOlsibWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVkaXNDbGllbnQgZnJvbSAnLi91dGlscy9yZWRpcyc7XG5cbihhc3luYyAoKSA9PiB7XG4gICAgY29uc29sZS5sb2cocmVkaXNDbGllbnQuaXNBbGl2ZSgpKTtcbiAgICBjb25zb2xlLmxvZyhhd2FpdCByZWRpc0NsaWVudC5nZXQoJ215S2V5JykpO1xuICAgIGF3YWl0IHJlZGlzQ2xpZW50LnNldCgnbXlLZXknLCAxMiwgNSk7XG4gICAgY29uc29sZS5sb2coYXdhaXQgcmVkaXNDbGllbnQuZ2V0KCdteUtleScpKTtcblxuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhhd2FpdCByZWRpc0NsaWVudC5nZXQoJ215S2V5JykpO1xuICAgIH0sIDEwMDAqMTApXG59KSgpO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUF3QyxTQUFBRCx1QkFBQUUsR0FBQSxXQUFBQSxHQUFBLElBQUFBLEdBQUEsQ0FBQUMsVUFBQSxHQUFBRCxHQUFBLEtBQUFFLE9BQUEsRUFBQUYsR0FBQTtBQUV4QyxDQUFDLFlBQVk7RUFDVEcsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGNBQVcsQ0FBQ0MsT0FBTyxDQUFDLENBQUMsQ0FBQztFQUNsQ0gsT0FBTyxDQUFDQyxHQUFHLENBQUMsTUFBTUMsY0FBVyxDQUFDRSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7RUFDM0MsTUFBTUYsY0FBVyxDQUFDRyxHQUFHLENBQUMsT0FBTyxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7RUFDckNMLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLE1BQU1DLGNBQVcsQ0FBQ0UsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0VBRTNDRSxVQUFVLENBQUMsWUFBWTtJQUNuQk4sT0FBTyxDQUFDQyxHQUFHLENBQUMsTUFBTUMsY0FBVyxDQUFDRSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7RUFDL0MsQ0FBQyxFQUFFLElBQUksR0FBQyxFQUFFLENBQUM7QUFDZixDQUFDLEVBQUUsQ0FBQyJ9","map":{"version":3,"names":["_redis","_interopRequireDefault","require","obj","__esModule","default","console","log","redisClient","isAlive","get","set","setTimeout"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/","sources":["main.js"],"sourcesContent":["import redisClient from './utils/redis';\n\n(async () => {\n    console.log(redisClient.isAlive());\n    console.log(await redisClient.get('myKey'));\n    await redisClient.set('myKey', 12, 5);\n    console.log(await redisClient.get('myKey'));\n\n    setTimeout(async () => {\n        console.log(await redisClient.get('myKey'));\n    }, 1000*10)\n})();\n"],"mappings":";;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAwC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAExC,CAAC,YAAY;EACTG,OAAO,CAACC,GAAG,CAACC,cAAW,CAACC,OAAO,CAAC,CAAC,CAAC;EAClCH,OAAO,CAACC,GAAG,CAAC,MAAMC,cAAW,CAACE,GAAG,CAAC,OAAO,CAAC,CAAC;EAC3C,MAAMF,cAAW,CAACG,GAAG,CAAC,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC;EACrCL,OAAO,CAACC,GAAG,CAAC,MAAMC,cAAW,CAACE,GAAG,CAAC,OAAO,CAAC,CAAC;EAE3CE,UAAU,CAAC,YAAY;IACnBN,OAAO,CAACC,GAAG,CAAC,MAAMC,cAAW,CAACE,GAAG,CAAC,OAAO,CAAC,CAAC;EAC/C,CAAC,EAAE,IAAI,GAAC,EAAE,CAAC;AACf,CAAC,EAAE,CAAC"}},"mtime":1708261064939},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/utils/redis.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst redis = require('redis');\nclass RedisClient {\n  constructor() {\n    this.client = redis.createClient();\n    this.client.on('error', error => {\n      console.log(error);\n    });\n  }\n  isAlive() {\n    if (this.client.exists(1)) {\n      return true;\n    }\n    return false;\n  }\n  async get(key) {\n    let result;\n    if (this.isAlive()) {\n      result = await new Promise(resolve => {\n        this.client.get(key, (error, response) => {\n          if (!error) {\n            resolve(response);\n          }\n        });\n      });\n    }\n    return result;\n  }\n  async set(key, value, duration) {\n    this.client.set(key, value, 'EX', duration);\n  }\n  async del(key) {\n    if (this.isAlive()) {\n      this.client.del(key);\n    }\n  }\n}\nconst redisClient = new RedisClient();\nmodule.exports = redisClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWRpcyIsInJlcXVpcmUiLCJSZWRpc0NsaWVudCIsImNvbnN0cnVjdG9yIiwiY2xpZW50IiwiY3JlYXRlQ2xpZW50Iiwib24iLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpc0FsaXZlIiwiZXhpc3RzIiwiZ2V0Iiwia2V5IiwicmVzdWx0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZXNwb25zZSIsInNldCIsInZhbHVlIiwiZHVyYXRpb24iLCJkZWwiLCJyZWRpc0NsaWVudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9yb290L0FMWC1CYWNrZW5kL2FseC1maWxlc19tYW5hZ2VyL3V0aWxzLyIsInNvdXJjZXMiOlsicmVkaXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVkaXMgPSByZXF1aXJlKCdyZWRpcycpO1xuXG5jbGFzcyBSZWRpc0NsaWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY2xpZW50ID0gcmVkaXMuY3JlYXRlQ2xpZW50KCk7XG4gICAgdGhpcy5jbGllbnQub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICBpc0FsaXZlKCkge1xuICAgIGlmICh0aGlzLmNsaWVudC5leGlzdHMoMSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyBnZXQoa2V5KSB7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBpZiAodGhpcy5pc0FsaXZlKCkpIHtcbiAgICAgIHJlc3VsdCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIHRoaXMuY2xpZW50LmdldChrZXksIChlcnJvciwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlc3BvbnNlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBhc3luYyBzZXQoa2V5LCB2YWx1ZSwgZHVyYXRpb24pIHtcbiAgICB0aGlzLmNsaWVudC5zZXQoa2V5LCB2YWx1ZSwgJ0VYJywgZHVyYXRpb24pO1xuICB9XG5cbiAgYXN5bmMgZGVsKGtleSkge1xuICAgIGlmICh0aGlzLmlzQWxpdmUoKSkge1xuICAgICAgdGhpcy5jbGllbnQuZGVsKGtleSk7XG4gICAgfVxuICB9XG59XG5jb25zdCByZWRpc0NsaWVudCA9IG5ldyBSZWRpc0NsaWVudCgpO1xubW9kdWxlLmV4cG9ydHMgPSByZWRpc0NsaWVudDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFFOUIsTUFBTUMsV0FBVyxDQUFDO0VBQ2hCQyxXQUFXQSxDQUFBLEVBQUc7SUFDWixJQUFJLENBQUNDLE1BQU0sR0FBR0osS0FBSyxDQUFDSyxZQUFZLENBQUMsQ0FBQztJQUNsQyxJQUFJLENBQUNELE1BQU0sQ0FBQ0UsRUFBRSxDQUFDLE9BQU8sRUFBR0MsS0FBSyxJQUFLO01BQ2pDQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsS0FBSyxDQUFDO0lBQ3BCLENBQUMsQ0FBQztFQUNKO0VBRUFHLE9BQU9BLENBQUEsRUFBRztJQUNSLElBQUksSUFBSSxDQUFDTixNQUFNLENBQUNPLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRTtNQUN6QixPQUFPLElBQUk7SUFDYjtJQUNBLE9BQU8sS0FBSztFQUNkO0VBRUEsTUFBTUMsR0FBR0EsQ0FBQ0MsR0FBRyxFQUFFO0lBQ2IsSUFBSUMsTUFBTTtJQUNWLElBQUksSUFBSSxDQUFDSixPQUFPLENBQUMsQ0FBQyxFQUFFO01BQ2xCSSxNQUFNLEdBQUcsTUFBTSxJQUFJQyxPQUFPLENBQUVDLE9BQU8sSUFBSztRQUN0QyxJQUFJLENBQUNaLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDQyxHQUFHLEVBQUUsQ0FBQ04sS0FBSyxFQUFFVSxRQUFRLEtBQUs7VUFDeEMsSUFBSSxDQUFDVixLQUFLLEVBQUU7WUFDVlMsT0FBTyxDQUFDQyxRQUFRLENBQUM7VUFDbkI7UUFDRixDQUFDLENBQUM7TUFDSixDQUFDLENBQUM7SUFDSjtJQUNBLE9BQU9ILE1BQU07RUFDZjtFQUVBLE1BQU1JLEdBQUdBLENBQUNMLEdBQUcsRUFBRU0sS0FBSyxFQUFFQyxRQUFRLEVBQUU7SUFDOUIsSUFBSSxDQUFDaEIsTUFBTSxDQUFDYyxHQUFHLENBQUNMLEdBQUcsRUFBRU0sS0FBSyxFQUFFLElBQUksRUFBRUMsUUFBUSxDQUFDO0VBQzdDO0VBRUEsTUFBTUMsR0FBR0EsQ0FBQ1IsR0FBRyxFQUFFO0lBQ2IsSUFBSSxJQUFJLENBQUNILE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDbEIsSUFBSSxDQUFDTixNQUFNLENBQUNpQixHQUFHLENBQUNSLEdBQUcsQ0FBQztJQUN0QjtFQUNGO0FBQ0Y7QUFDQSxNQUFNUyxXQUFXLEdBQUcsSUFBSXBCLFdBQVcsQ0FBQyxDQUFDO0FBQ3JDcUIsTUFBTSxDQUFDQyxPQUFPLEdBQUdGLFdBQVcifQ==","map":{"version":3,"names":["redis","require","RedisClient","constructor","client","createClient","on","error","console","log","isAlive","exists","get","key","result","Promise","resolve","response","set","value","duration","del","redisClient","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/utils/","sources":["redis.js"],"sourcesContent":["const redis = require('redis');\n\nclass RedisClient {\n  constructor() {\n    this.client = redis.createClient();\n    this.client.on('error', (error) => {\n      console.log(error);\n    });\n  }\n\n  isAlive() {\n    if (this.client.exists(1)) {\n      return true;\n    }\n    return false;\n  }\n\n  async get(key) {\n    let result;\n    if (this.isAlive()) {\n      result = await new Promise((resolve) => {\n        this.client.get(key, (error, response) => {\n          if (!error) {\n            resolve(response);\n          }\n        });\n      });\n    }\n    return result;\n  }\n\n  async set(key, value, duration) {\n    this.client.set(key, value, 'EX', duration);\n  }\n\n  async del(key) {\n    if (this.isAlive()) {\n      this.client.del(key);\n    }\n  }\n}\nconst redisClient = new RedisClient();\nmodule.exports = redisClient;\n"],"mappings":";;AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;AAE9B,MAAMC,WAAW,CAAC;EAChBC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,MAAM,GAAGJ,KAAK,CAACK,YAAY,CAAC,CAAC;IAClC,IAAI,CAACD,MAAM,CAACE,EAAE,CAAC,OAAO,EAAGC,KAAK,IAAK;MACjCC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CAAC;EACJ;EAEAG,OAAOA,CAAA,EAAG;IACR,IAAI,IAAI,CAACN,MAAM,CAACO,MAAM,CAAC,CAAC,CAAC,EAAE;MACzB,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd;EAEA,MAAMC,GAAGA,CAACC,GAAG,EAAE;IACb,IAAIC,MAAM;IACV,IAAI,IAAI,CAACJ,OAAO,CAAC,CAAC,EAAE;MAClBI,MAAM,GAAG,MAAM,IAAIC,OAAO,CAAEC,OAAO,IAAK;QACtC,IAAI,CAACZ,MAAM,CAACQ,GAAG,CAACC,GAAG,EAAE,CAACN,KAAK,EAAEU,QAAQ,KAAK;UACxC,IAAI,CAACV,KAAK,EAAE;YACVS,OAAO,CAACC,QAAQ,CAAC;UACnB;QACF,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ;IACA,OAAOH,MAAM;EACf;EAEA,MAAMI,GAAGA,CAACL,GAAG,EAAEM,KAAK,EAAEC,QAAQ,EAAE;IAC9B,IAAI,CAAChB,MAAM,CAACc,GAAG,CAACL,GAAG,EAAEM,KAAK,EAAE,IAAI,EAAEC,QAAQ,CAAC;EAC7C;EAEA,MAAMC,GAAGA,CAACR,GAAG,EAAE;IACb,IAAI,IAAI,CAACH,OAAO,CAAC,CAAC,EAAE;MAClB,IAAI,CAACN,MAAM,CAACiB,GAAG,CAACR,GAAG,CAAC;IACtB;EACF;AACF;AACA,MAAMS,WAAW,GAAG,IAAIpB,WAAW,CAAC,CAAC;AACrCqB,MAAM,CAACC,OAAO,GAAGF,WAAW"}},"mtime":1708778556172},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/utils/redis.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst redis = require('redis');\nclass RedisClient {\n  client = null;\n  constructor() {\n    this.client = redis.createClient();\n    this.client.on('error', error => {\n      console.log(error);\n    });\n  }\n  isAlive() {\n    console.log(this.client);\n    if (this.client) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  async get(key) {\n    if (this.isAlive()) {\n      let result = await new Promise((resolve, reject) => {\n        this.client.get(key, (error, response) => {\n          if (!error) {\n            resolve(response);\n          }\n        });\n      });\n      return result;\n    }\n  }\n  async set(key, value, duration) {\n    this.client.set(key, value, 'EX', duration);\n  }\n  async del(key) {\n    if (this.isAlive()) {\n      this.client.remove(key);\n    }\n  }\n}\nconst redisClient = new RedisClient();\nmodule.exports = redisClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWRpcyIsInJlcXVpcmUiLCJSZWRpc0NsaWVudCIsImNsaWVudCIsImNvbnN0cnVjdG9yIiwiY3JlYXRlQ2xpZW50Iiwib24iLCJlcnJvciIsImNvbnNvbGUiLCJsb2ciLCJpc0FsaXZlIiwiZ2V0Iiwia2V5IiwicmVzdWx0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXNwb25zZSIsInNldCIsInZhbHVlIiwiZHVyYXRpb24iLCJkZWwiLCJyZW1vdmUiLCJyZWRpc0NsaWVudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9yb290L0FMWC1CYWNrZW5kL2FseC1maWxlc19tYW5hZ2VyL3V0aWxzLyIsInNvdXJjZXMiOlsicmVkaXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVkaXMgPSByZXF1aXJlKCdyZWRpcycpO1xuY2xhc3MgUmVkaXNDbGllbnQge1xuICBjbGllbnQgPSBudWxsO1xuICBjb25zdHJ1Y3Rvcigpe1xuICAgIHRoaXMuY2xpZW50ID0gcmVkaXMuY3JlYXRlQ2xpZW50KCk7XG4gICAgdGhpcy5jbGllbnQub24oJ2Vycm9yJywgKGVycm9yKT0+e1xuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgIH0pXG4gIH1cbiAgaXNBbGl2ZSgpe1xuXHQgIGNvbnNvbGUubG9nKHRoaXMuY2xpZW50KVxuICAgIGlmICh0aGlzLmNsaWVudCl7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2V7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIGFzeW5jIGdldChrZXkpe1xuICAgIGlmICh0aGlzLmlzQWxpdmUoKSl7XG4gICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCk9PntcbiAgICAgICAgdGhpcy5jbGllbnQuZ2V0KGtleSwgKGVycm9yLCByZXNwb25zZSk9PntcbiAgICAgICAgICBpZiAoIWVycm9yKXtcbiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuXHQgIH1cblx0fSk7XG4gICAgICB9KVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cbiAgYXN5bmMgc2V0KCBrZXksIHZhbHVlLCBkdXJhdGlvbil7XG4gICAgdGhpcy5jbGllbnQuc2V0KGtleSwgdmFsdWUsICdFWCcsIGR1cmF0aW9uKTsgXG4gIH1cbiAgYXN5bmMgZGVsKGtleSl7XG4gICBpZiAodGhpcy5pc0FsaXZlKCkpe1xuICAgICB0aGlzLmNsaWVudC5yZW1vdmUoa2V5KTtcbiAgIH0gXG4gIH1cbiAgXG59XG5jb25zdCByZWRpc0NsaWVudCA9IG5ldyBSZWRpc0NsaWVudCgpO1xubW9kdWxlLmV4cG9ydHMgPSByZWRpc0NsaWVudDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxLQUFLLEdBQUdDLE9BQU8sQ0FBQyxPQUFPLENBQUM7QUFDOUIsTUFBTUMsV0FBVyxDQUFDO0VBQ2hCQyxNQUFNLEdBQUcsSUFBSTtFQUNiQyxXQUFXQSxDQUFBLEVBQUU7SUFDWCxJQUFJLENBQUNELE1BQU0sR0FBR0gsS0FBSyxDQUFDSyxZQUFZLENBQUMsQ0FBQztJQUNsQyxJQUFJLENBQUNGLE1BQU0sQ0FBQ0csRUFBRSxDQUFDLE9BQU8sRUFBR0MsS0FBSyxJQUFHO01BQy9CQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0YsS0FBSyxDQUFDO0lBQ3BCLENBQUMsQ0FBQztFQUNKO0VBQ0FHLE9BQU9BLENBQUEsRUFBRTtJQUNSRixPQUFPLENBQUNDLEdBQUcsQ0FBQyxJQUFJLENBQUNOLE1BQU0sQ0FBQztJQUN2QixJQUFJLElBQUksQ0FBQ0EsTUFBTSxFQUFDO01BQ2QsT0FBTyxJQUFJO0lBQ2IsQ0FBQyxNQUFLO01BQ0osT0FBTyxLQUFLO0lBQ2Q7RUFDRjtFQUNBLE1BQU1RLEdBQUdBLENBQUNDLEdBQUcsRUFBQztJQUNaLElBQUksSUFBSSxDQUFDRixPQUFPLENBQUMsQ0FBQyxFQUFDO01BQ2pCLElBQUlHLE1BQU0sR0FBRyxNQUFNLElBQUlDLE9BQU8sQ0FBQyxDQUFDQyxPQUFPLEVBQUVDLE1BQU0sS0FBRztRQUNoRCxJQUFJLENBQUNiLE1BQU0sQ0FBQ1EsR0FBRyxDQUFDQyxHQUFHLEVBQUUsQ0FBQ0wsS0FBSyxFQUFFVSxRQUFRLEtBQUc7VUFDdEMsSUFBSSxDQUFDVixLQUFLLEVBQUM7WUFDVFEsT0FBTyxDQUFDRSxRQUFRLENBQUM7VUFDMUI7UUFDRixDQUFDLENBQUM7TUFDRyxDQUFDLENBQUM7TUFDRixPQUFPSixNQUFNO0lBQ2Y7RUFDRjtFQUNBLE1BQU1LLEdBQUdBLENBQUVOLEdBQUcsRUFBRU8sS0FBSyxFQUFFQyxRQUFRLEVBQUM7SUFDOUIsSUFBSSxDQUFDakIsTUFBTSxDQUFDZSxHQUFHLENBQUNOLEdBQUcsRUFBRU8sS0FBSyxFQUFFLElBQUksRUFBRUMsUUFBUSxDQUFDO0VBQzdDO0VBQ0EsTUFBTUMsR0FBR0EsQ0FBQ1QsR0FBRyxFQUFDO0lBQ2IsSUFBSSxJQUFJLENBQUNGLE9BQU8sQ0FBQyxDQUFDLEVBQUM7TUFDakIsSUFBSSxDQUFDUCxNQUFNLENBQUNtQixNQUFNLENBQUNWLEdBQUcsQ0FBQztJQUN6QjtFQUNEO0FBRUY7QUFDQSxNQUFNVyxXQUFXLEdBQUcsSUFBSXJCLFdBQVcsQ0FBQyxDQUFDO0FBQ3JDc0IsTUFBTSxDQUFDQyxPQUFPLEdBQUdGLFdBQVcifQ==","map":{"version":3,"names":["redis","require","RedisClient","client","constructor","createClient","on","error","console","log","isAlive","get","key","result","Promise","resolve","reject","response","set","value","duration","del","remove","redisClient","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/utils/","sources":["redis.js"],"sourcesContent":["const redis = require('redis');\nclass RedisClient {\n  client = null;\n  constructor(){\n    this.client = redis.createClient();\n    this.client.on('error', (error)=>{\n      console.log(error);\n    })\n  }\n  isAlive(){\n\t  console.log(this.client)\n    if (this.client){\n      return true;\n    } else{\n      return false;\n    }\n  }\n  async get(key){\n    if (this.isAlive()){\n      let result = await new Promise((resolve, reject)=>{\n        this.client.get(key, (error, response)=>{\n          if (!error){\n            resolve(response);\n\t  }\n\t});\n      })\n      return result;\n    }\n  }\n  async set( key, value, duration){\n    this.client.set(key, value, 'EX', duration); \n  }\n  async del(key){\n   if (this.isAlive()){\n     this.client.remove(key);\n   } \n  }\n  \n}\nconst redisClient = new RedisClient();\nmodule.exports = redisClient;\n"],"mappings":";;AAAA,MAAMA,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;AAC9B,MAAMC,WAAW,CAAC;EAChBC,MAAM,GAAG,IAAI;EACbC,WAAWA,CAAA,EAAE;IACX,IAAI,CAACD,MAAM,GAAGH,KAAK,CAACK,YAAY,CAAC,CAAC;IAClC,IAAI,CAACF,MAAM,CAACG,EAAE,CAAC,OAAO,EAAGC,KAAK,IAAG;MAC/BC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;IACpB,CAAC,CAAC;EACJ;EACAG,OAAOA,CAAA,EAAE;IACRF,OAAO,CAACC,GAAG,CAAC,IAAI,CAACN,MAAM,CAAC;IACvB,IAAI,IAAI,CAACA,MAAM,EAAC;MACd,OAAO,IAAI;IACb,CAAC,MAAK;MACJ,OAAO,KAAK;IACd;EACF;EACA,MAAMQ,GAAGA,CAACC,GAAG,EAAC;IACZ,IAAI,IAAI,CAACF,OAAO,CAAC,CAAC,EAAC;MACjB,IAAIG,MAAM,GAAG,MAAM,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAG;QAChD,IAAI,CAACb,MAAM,CAACQ,GAAG,CAACC,GAAG,EAAE,CAACL,KAAK,EAAEU,QAAQ,KAAG;UACtC,IAAI,CAACV,KAAK,EAAC;YACTQ,OAAO,CAACE,QAAQ,CAAC;UAC1B;QACF,CAAC,CAAC;MACG,CAAC,CAAC;MACF,OAAOJ,MAAM;IACf;EACF;EACA,MAAMK,GAAGA,CAAEN,GAAG,EAAEO,KAAK,EAAEC,QAAQ,EAAC;IAC9B,IAAI,CAACjB,MAAM,CAACe,GAAG,CAACN,GAAG,EAAEO,KAAK,EAAE,IAAI,EAAEC,QAAQ,CAAC;EAC7C;EACA,MAAMC,GAAGA,CAACT,GAAG,EAAC;IACb,IAAI,IAAI,CAACF,OAAO,CAAC,CAAC,EAAC;MACjB,IAAI,CAACP,MAAM,CAACmB,MAAM,CAACV,GAAG,CAAC;IACzB;EACD;AAEF;AACA,MAAMW,WAAW,GAAG,IAAIrB,WAAW,CAAC,CAAC;AACrCsB,MAAM,CAACC,OAAO,GAAGF,WAAW"}},"mtime":1708412176542},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/1_main.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nvar _db = _interopRequireDefault(require(\"./utils/db\"));\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\nconst waitConnection = () => {\n  return new Promise((resolve, reject) => {\n    let i = 0;\n    const repeatFct = async () => {\n      await setTimeout(() => {\n        i += 1;\n        if (i >= 10) {\n          reject();\n        } else if (!_db.default.isAlive()) {\n          repeatFct();\n        } else {\n          resolve();\n        }\n      }, 1000);\n    };\n    repeatFct();\n  });\n};\n(async () => {\n  console.log(_db.default.isAlive());\n  await waitConnection();\n  console.log(_db.default.isAlive());\n  console.log(await _db.default.nbUsers());\n  console.log(await _db.default.nbFiles());\n})();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZGIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9iaiIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0Iiwid2FpdENvbm5lY3Rpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImkiLCJyZXBlYXRGY3QiLCJzZXRUaW1lb3V0IiwiZGJDbGllbnQiLCJpc0FsaXZlIiwiY29uc29sZSIsImxvZyIsIm5iVXNlcnMiLCJuYkZpbGVzIl0sInNvdXJjZVJvb3QiOiIvcm9vdC9BTFgtQmFja2VuZC9hbHgtZmlsZXNfbWFuYWdlci8iLCJzb3VyY2VzIjpbIjFfbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGJDbGllbnQgZnJvbSAnLi91dGlscy9kYic7XG5cbmNvbnN0IHdhaXRDb25uZWN0aW9uID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgcmVwZWF0RmN0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICAgIGlmIChpID49IDEwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYoIWRiQ2xpZW50LmlzQWxpdmUoKSkge1xuICAgICAgICAgICAgICAgICAgICByZXBlYXRGY3QoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcGVhdEZjdCgpO1xuICAgIH0pXG59O1xuXG4oYXN5bmMgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGRiQ2xpZW50LmlzQWxpdmUoKSk7XG4gICAgYXdhaXQgd2FpdENvbm5lY3Rpb24oKTtcbiAgICBjb25zb2xlLmxvZyhkYkNsaWVudC5pc0FsaXZlKCkpO1xuICAgIGNvbnNvbGUubG9nKGF3YWl0IGRiQ2xpZW50Lm5iVXNlcnMoKSk7XG4gICAgY29uc29sZS5sb2coYXdhaXQgZGJDbGllbnQubmJGaWxlcygpKTtcbn0pKCk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsR0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQWtDLFNBQUFELHVCQUFBRSxHQUFBLFdBQUFBLEdBQUEsSUFBQUEsR0FBQSxDQUFBQyxVQUFBLEdBQUFELEdBQUEsS0FBQUUsT0FBQSxFQUFBRixHQUFBO0FBRWxDLE1BQU1HLGNBQWMsR0FBR0EsQ0FBQSxLQUFNO0VBQ3pCLE9BQU8sSUFBSUMsT0FBTyxDQUFDLENBQUNDLE9BQU8sRUFBRUMsTUFBTSxLQUFLO0lBQ3BDLElBQUlDLENBQUMsR0FBRyxDQUFDO0lBQ1QsTUFBTUMsU0FBUyxHQUFHLE1BQUFBLENBQUEsS0FBWTtNQUMxQixNQUFNQyxVQUFVLENBQUMsTUFBTTtRQUNuQkYsQ0FBQyxJQUFJLENBQUM7UUFDTixJQUFJQSxDQUFDLElBQUksRUFBRSxFQUFFO1VBQ1RELE1BQU0sQ0FBQyxDQUFDO1FBQ1osQ0FBQyxNQUNJLElBQUcsQ0FBQ0ksV0FBUSxDQUFDQyxPQUFPLENBQUMsQ0FBQyxFQUFFO1VBQ3pCSCxTQUFTLENBQUMsQ0FBQztRQUNmLENBQUMsTUFDSTtVQUNESCxPQUFPLENBQUMsQ0FBQztRQUNiO01BQ0osQ0FBQyxFQUFFLElBQUksQ0FBQztJQUNaLENBQUM7SUFDREcsU0FBUyxDQUFDLENBQUM7RUFDZixDQUFDLENBQUM7QUFDTixDQUFDO0FBRUQsQ0FBQyxZQUFZO0VBQ1RJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxXQUFRLENBQUNDLE9BQU8sQ0FBQyxDQUFDLENBQUM7RUFDL0IsTUFBTVIsY0FBYyxDQUFDLENBQUM7RUFDdEJTLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDSCxXQUFRLENBQUNDLE9BQU8sQ0FBQyxDQUFDLENBQUM7RUFDL0JDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLE1BQU1ILFdBQVEsQ0FBQ0ksT0FBTyxDQUFDLENBQUMsQ0FBQztFQUNyQ0YsT0FBTyxDQUFDQyxHQUFHLENBQUMsTUFBTUgsV0FBUSxDQUFDSyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ3pDLENBQUMsRUFBRSxDQUFDIn0=","map":{"version":3,"names":["_db","_interopRequireDefault","require","obj","__esModule","default","waitConnection","Promise","resolve","reject","i","repeatFct","setTimeout","dbClient","isAlive","console","log","nbUsers","nbFiles"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/","sources":["1_main.js"],"sourcesContent":["import dbClient from './utils/db';\n\nconst waitConnection = () => {\n    return new Promise((resolve, reject) => {\n        let i = 0;\n        const repeatFct = async () => {\n            await setTimeout(() => {\n                i += 1;\n                if (i >= 10) {\n                    reject()\n                }\n                else if(!dbClient.isAlive()) {\n                    repeatFct()\n                }\n                else {\n                    resolve()\n                }\n            }, 1000);\n        };\n        repeatFct();\n    })\n};\n\n(async () => {\n    console.log(dbClient.isAlive());\n    await waitConnection();\n    console.log(dbClient.isAlive());\n    console.log(await dbClient.nbUsers());\n    console.log(await dbClient.nbFiles());\n})();\n"],"mappings":";;AAAA,IAAAA,GAAA,GAAAC,sBAAA,CAAAC,OAAA;AAAkC,SAAAD,uBAAAE,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,KAAAE,OAAA,EAAAF,GAAA;AAElC,MAAMG,cAAc,GAAGA,CAAA,KAAM;EACzB,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,IAAIC,CAAC,GAAG,CAAC;IACT,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC1B,MAAMC,UAAU,CAAC,MAAM;QACnBF,CAAC,IAAI,CAAC;QACN,IAAIA,CAAC,IAAI,EAAE,EAAE;UACTD,MAAM,CAAC,CAAC;QACZ,CAAC,MACI,IAAG,CAACI,WAAQ,CAACC,OAAO,CAAC,CAAC,EAAE;UACzBH,SAAS,CAAC,CAAC;QACf,CAAC,MACI;UACDH,OAAO,CAAC,CAAC;QACb;MACJ,CAAC,EAAE,IAAI,CAAC;IACZ,CAAC;IACDG,SAAS,CAAC,CAAC;EACf,CAAC,CAAC;AACN,CAAC;AAED,CAAC,YAAY;EACTI,OAAO,CAACC,GAAG,CAACH,WAAQ,CAACC,OAAO,CAAC,CAAC,CAAC;EAC/B,MAAMR,cAAc,CAAC,CAAC;EACtBS,OAAO,CAACC,GAAG,CAACH,WAAQ,CAACC,OAAO,CAAC,CAAC,CAAC;EAC/BC,OAAO,CAACC,GAAG,CAAC,MAAMH,WAAQ,CAACI,OAAO,CAAC,CAAC,CAAC;EACrCF,OAAO,CAACC,GAAG,CAAC,MAAMH,WAAQ,CAACK,OAAO,CAAC,CAAC,CAAC;AACzC,CAAC,EAAE,CAAC"}},"mtime":1708500178232},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/utils/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst MongoClient = require('mongodb').MongoClient;\nconst env = require('process').env;\nclass DBClient {\n  constructor() {\n    this.clientObject = null;\n    if (env.DB_DATABASE) {\n      this.databaseName = env.DB_DATABASE;\n    } else {\n      this.databaseName = 'files_manager';\n    }\n    if (env.DB_PORT && env.DB_HOST && env.DB_DATABASE) {\n      this.url = `mongodb://${env.DB_HOST}:${env.DB_PORT}/${env.DB_DATABASE}`;\n    } else {\n      this.url = `mongodb://localhost:27017`;\n    }\n    this.client = new MongoClient(this.url, {\n      useUnifiedTopology: true\n    });\n    this.client.connect((error, client) => {\n      if (client) {\n        this.clientObject = client;\n      }\n    });\n  }\n  isAlive() {\n    if (this.clientObject) {\n      return true;\n    }\n    return false;\n  }\n  async nbUsers() {\n    if (this.isAlive()) {\n      console.log('were');\n    }\n  }\n  async nbFiles() {}\n}\nconst dbClient = new DBClient();\nmodule.exports = dbClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsInJlcXVpcmUiLCJlbnYiLCJEQkNsaWVudCIsImNvbnN0cnVjdG9yIiwiY2xpZW50T2JqZWN0IiwiREJfREFUQUJBU0UiLCJkYXRhYmFzZU5hbWUiLCJEQl9QT1JUIiwiREJfSE9TVCIsInVybCIsImNsaWVudCIsInVzZVVuaWZpZWRUb3BvbG9neSIsImNvbm5lY3QiLCJlcnJvciIsImlzQWxpdmUiLCJuYlVzZXJzIiwiY29uc29sZSIsImxvZyIsIm5iRmlsZXMiLCJkYkNsaWVudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9yb290L0FMWC1CYWNrZW5kL2FseC1maWxlc19tYW5hZ2VyL3V0aWxzLyIsInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgTW9uZ29DbGllbnQgPSByZXF1aXJlKCdtb25nb2RiJykuTW9uZ29DbGllbnQ7XG5jb25zdCBlbnYgPSByZXF1aXJlKCdwcm9jZXNzJykuZW52O1xuY2xhc3MgREJDbGllbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNsaWVudE9iamVjdCA9IG51bGw7XG4gICAgaWYgKGVudi5EQl9EQVRBQkFTRSl7XG4gICAgICB0aGlzLmRhdGFiYXNlTmFtZSA9IGVudi5EQl9EQVRBQkFTRTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kYXRhYmFzZU5hbWUgPSAnZmlsZXNfbWFuYWdlcic7XG4gICAgfVxuICAgIGlmIChlbnYuREJfUE9SVCAmJiBlbnYuREJfSE9TVCAmJiBlbnYuREJfREFUQUJBU0UpeyBcbiAgICAgIHRoaXMudXJsID0gYG1vbmdvZGI6Ly8ke2Vudi5EQl9IT1NUfToke2Vudi5EQl9QT1JUfS8ke2Vudi5EQl9EQVRBQkFTRX1gXG4gICAgfWVsc2V7XG4gICAgICB0aGlzLnVybCA9IGBtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3YDtcbiAgICB9XG4gICAgdGhpcy5jbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodGhpcy51cmwsIHsgdXNlVW5pZmllZFRvcG9sb2d5OiB0cnVlIH0pXG4gICAgdGhpcy5jbGllbnQuY29ubmVjdCgoZXJyb3IsIGNsaWVudCk9PntcbiAgICAgIGlmIChjbGllbnQpe1xuICAgICAgICB0aGlzLmNsaWVudE9iamVjdCA9IGNsaWVudDtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB9XG4gIGlzQWxpdmUoKSB7XG4gICAgaWYgKHRoaXMuY2xpZW50T2JqZWN0KXtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgIH1cbiAgYXN5bmMgbmJVc2VycyAoKXtcbiAgICBpZiAodGhpcy5pc0FsaXZlKCkpe1xuICAgICBjb25zb2xlLmxvZygnd2VyZScpIFxuICAgIH1cbiAgfVxuICBhc3luYyBuYkZpbGVzICgpIHtcblxuICB9XG59XG5jb25zdCBkYkNsaWVudCA9IG5ldyBEQkNsaWVudCgpO1xubW9kdWxlLmV4cG9ydHMgPSBkYkNsaWVudDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQ0QsV0FBVztBQUNsRCxNQUFNRSxHQUFHLEdBQUdELE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQ0MsR0FBRztBQUNsQyxNQUFNQyxRQUFRLENBQUM7RUFDYkMsV0FBV0EsQ0FBQSxFQUFHO0lBQ1osSUFBSSxDQUFDQyxZQUFZLEdBQUcsSUFBSTtJQUN4QixJQUFJSCxHQUFHLENBQUNJLFdBQVcsRUFBQztNQUNsQixJQUFJLENBQUNDLFlBQVksR0FBR0wsR0FBRyxDQUFDSSxXQUFXO0lBQ3JDLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ0MsWUFBWSxHQUFHLGVBQWU7SUFDckM7SUFDQSxJQUFJTCxHQUFHLENBQUNNLE9BQU8sSUFBSU4sR0FBRyxDQUFDTyxPQUFPLElBQUlQLEdBQUcsQ0FBQ0ksV0FBVyxFQUFDO01BQ2hELElBQUksQ0FBQ0ksR0FBRyxHQUFJLGFBQVlSLEdBQUcsQ0FBQ08sT0FBUSxJQUFHUCxHQUFHLENBQUNNLE9BQVEsSUFBR04sR0FBRyxDQUFDSSxXQUFZLEVBQUM7SUFDekUsQ0FBQyxNQUFJO01BQ0gsSUFBSSxDQUFDSSxHQUFHLEdBQUksMkJBQTBCO0lBQ3hDO0lBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSVgsV0FBVyxDQUFDLElBQUksQ0FBQ1UsR0FBRyxFQUFFO01BQUVFLGtCQUFrQixFQUFFO0lBQUssQ0FBQyxDQUFDO0lBQ3JFLElBQUksQ0FBQ0QsTUFBTSxDQUFDRSxPQUFPLENBQUMsQ0FBQ0MsS0FBSyxFQUFFSCxNQUFNLEtBQUc7TUFDbkMsSUFBSUEsTUFBTSxFQUFDO1FBQ1QsSUFBSSxDQUFDTixZQUFZLEdBQUdNLE1BQU07TUFDNUI7SUFDRixDQUFDLENBQUM7RUFDRjtFQUNGSSxPQUFPQSxDQUFBLEVBQUc7SUFDUixJQUFJLElBQUksQ0FBQ1YsWUFBWSxFQUFDO01BQ3BCLE9BQU8sSUFBSTtJQUNiO0lBQ0EsT0FBTyxLQUFLO0VBQ2I7RUFDRCxNQUFNVyxPQUFPQSxDQUFBLEVBQUc7SUFDZCxJQUFJLElBQUksQ0FBQ0QsT0FBTyxDQUFDLENBQUMsRUFBQztNQUNsQkUsT0FBTyxDQUFDQyxHQUFHLENBQUMsTUFBTSxDQUFDO0lBQ3BCO0VBQ0Y7RUFDQSxNQUFNQyxPQUFPQSxDQUFBLEVBQUksQ0FFakI7QUFDRjtBQUNBLE1BQU1DLFFBQVEsR0FBRyxJQUFJakIsUUFBUSxDQUFDLENBQUM7QUFDL0JrQixNQUFNLENBQUNDLE9BQU8sR0FBR0YsUUFBUSJ9","map":{"version":3,"names":["MongoClient","require","env","DBClient","constructor","clientObject","DB_DATABASE","databaseName","DB_PORT","DB_HOST","url","client","useUnifiedTopology","connect","error","isAlive","nbUsers","console","log","nbFiles","dbClient","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/utils/","sources":["db.js"],"sourcesContent":["const MongoClient = require('mongodb').MongoClient;\nconst env = require('process').env;\nclass DBClient {\n  constructor() {\n    this.clientObject = null;\n    if (env.DB_DATABASE){\n      this.databaseName = env.DB_DATABASE;\n    } else {\n      this.databaseName = 'files_manager';\n    }\n    if (env.DB_PORT && env.DB_HOST && env.DB_DATABASE){ \n      this.url = `mongodb://${env.DB_HOST}:${env.DB_PORT}/${env.DB_DATABASE}`\n    }else{\n      this.url = `mongodb://localhost:27017`;\n    }\n    this.client = new MongoClient(this.url, { useUnifiedTopology: true })\n    this.client.connect((error, client)=>{\n      if (client){\n        this.clientObject = client;\n      }\n    });\n    }\n  isAlive() {\n    if (this.clientObject){\n      return true;\n    }\n    return false\n   }\n  async nbUsers (){\n    if (this.isAlive()){\n     console.log('were') \n    }\n  }\n  async nbFiles () {\n\n  }\n}\nconst dbClient = new DBClient();\nmodule.exports = dbClient;\n"],"mappings":";;AAAA,MAAMA,WAAW,GAAGC,OAAO,CAAC,SAAS,CAAC,CAACD,WAAW;AAClD,MAAME,GAAG,GAAGD,OAAO,CAAC,SAAS,CAAC,CAACC,GAAG;AAClC,MAAMC,QAAQ,CAAC;EACbC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAIH,GAAG,CAACI,WAAW,EAAC;MAClB,IAAI,CAACC,YAAY,GAAGL,GAAG,CAACI,WAAW;IACrC,CAAC,MAAM;MACL,IAAI,CAACC,YAAY,GAAG,eAAe;IACrC;IACA,IAAIL,GAAG,CAACM,OAAO,IAAIN,GAAG,CAACO,OAAO,IAAIP,GAAG,CAACI,WAAW,EAAC;MAChD,IAAI,CAACI,GAAG,GAAI,aAAYR,GAAG,CAACO,OAAQ,IAAGP,GAAG,CAACM,OAAQ,IAAGN,GAAG,CAACI,WAAY,EAAC;IACzE,CAAC,MAAI;MACH,IAAI,CAACI,GAAG,GAAI,2BAA0B;IACxC;IACA,IAAI,CAACC,MAAM,GAAG,IAAIX,WAAW,CAAC,IAAI,CAACU,GAAG,EAAE;MAAEE,kBAAkB,EAAE;IAAK,CAAC,CAAC;IACrE,IAAI,CAACD,MAAM,CAACE,OAAO,CAAC,CAACC,KAAK,EAAEH,MAAM,KAAG;MACnC,IAAIA,MAAM,EAAC;QACT,IAAI,CAACN,YAAY,GAAGM,MAAM;MAC5B;IACF,CAAC,CAAC;EACF;EACFI,OAAOA,CAAA,EAAG;IACR,IAAI,IAAI,CAACV,YAAY,EAAC;MACpB,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACb;EACD,MAAMW,OAAOA,CAAA,EAAG;IACd,IAAI,IAAI,CAACD,OAAO,CAAC,CAAC,EAAC;MAClBE,OAAO,CAACC,GAAG,CAAC,MAAM,CAAC;IACpB;EACF;EACA,MAAMC,OAAOA,CAAA,EAAI,CAEjB;AACF;AACA,MAAMC,QAAQ,GAAG,IAAIjB,QAAQ,CAAC,CAAC;AAC/BkB,MAAM,CAACC,OAAO,GAAGF,QAAQ"}},"mtime":1708499827276},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/utils/db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst {\n  MongoClient\n} = require('mongodb');\nconst {\n  env\n} = require('process');\nclass DBClient {\n  constructor() {\n    this.clientObject = null;\n    this.database = null;\n    if (env.DB_DATABASE) {\n      this.databaseName = env.DB_DATABASE;\n    } else {\n      this.databaseName = 'files_manager';\n    }\n    if (env.DB_PORT && env.DB_HOST && env.DB_DATABASE) {\n      this.url = `mongodb://${env.DB_HOST}:${env.DB_PORT}/${env.DB_DATABASE}`;\n    } else {\n      this.url = 'mongodb://localhost:27017/files_manager';\n    }\n    let client = new MongoClient(this.url, {\n      useUnifiedTopology: true\n    });\n    client.connect(async (error, clint) => {\n      if (clint) {\n        console.log('Connected to the server');\n        this.clientObject = clint;\n        this.database = this.clientObject.db(this.databaseName);\n      }\n      if (error) {\n        console.log('Error Connecting to the server');\n      }\n    });\n  }\n  isAlive() {\n    if (this.clientObject) {\n      return true;\n    }\n    return false;\n  }\n  async nbUsers() {\n    let value = 0;\n    if (this.isAlive()) {\n      const users = this.database.collection('users');\n      value = await users.countDocuments();\n    }\n    return value;\n  }\n  async nbFiles() {\n    let value = 0;\n    if (this.isAlive()) {\n      const files = this.database.collection('files');\n      value = await files.countDocuments();\n    }\n    return value;\n  }\n}\nconst dbClient = new DBClient();\nmodule.exports = dbClient;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsInJlcXVpcmUiLCJlbnYiLCJEQkNsaWVudCIsImNvbnN0cnVjdG9yIiwiY2xpZW50T2JqZWN0IiwiZGF0YWJhc2UiLCJEQl9EQVRBQkFTRSIsImRhdGFiYXNlTmFtZSIsIkRCX1BPUlQiLCJEQl9IT1NUIiwidXJsIiwiY2xpZW50IiwidXNlVW5pZmllZFRvcG9sb2d5IiwiY29ubmVjdCIsImVycm9yIiwiY2xpbnQiLCJjb25zb2xlIiwibG9nIiwiZGIiLCJpc0FsaXZlIiwibmJVc2VycyIsInZhbHVlIiwidXNlcnMiLCJjb2xsZWN0aW9uIiwiY291bnREb2N1bWVudHMiLCJuYkZpbGVzIiwiZmlsZXMiLCJkYkNsaWVudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9yb290L0FMWC1CYWNrZW5kL2FseC1maWxlc19tYW5hZ2VyL3V0aWxzLyIsInNvdXJjZXMiOlsiZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBNb25nb0NsaWVudCB9ID0gcmVxdWlyZSgnbW9uZ29kYicpO1xuY29uc3QgeyBlbnYgfSA9IHJlcXVpcmUoJ3Byb2Nlc3MnKTtcblxuY2xhc3MgREJDbGllbnQge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNsaWVudE9iamVjdCA9IG51bGw7XG4gICAgdGhpcy5kYXRhYmFzZSA9IG51bGw7XG4gICAgaWYgKGVudi5EQl9EQVRBQkFTRSkge1xuICAgICAgdGhpcy5kYXRhYmFzZU5hbWUgPSBlbnYuREJfREFUQUJBU0U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGF0YWJhc2VOYW1lID0gJ2ZpbGVzX21hbmFnZXInO1xuICAgIH1cbiAgICBpZiAoZW52LkRCX1BPUlQgJiYgZW52LkRCX0hPU1QgJiYgZW52LkRCX0RBVEFCQVNFKSB7XG4gICAgICB0aGlzLnVybCA9IGBtb25nb2RiOi8vJHtlbnYuREJfSE9TVH06JHtlbnYuREJfUE9SVH0vJHtlbnYuREJfREFUQUJBU0V9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cmwgPSAnbW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9maWxlc19tYW5hZ2VyJztcbiAgICB9XG4gICAgbGV0IGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh0aGlzLnVybCwgeyB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUgfSk7XG4gICAgY2xpZW50LmNvbm5lY3QoYXN5bmMgKGVycm9yLCBjbGludCkgPT4ge1xuICAgICAgaWYgKGNsaW50KSB7XG5cdGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gdGhlIHNlcnZlcicpO1xuICAgICAgICB0aGlzLmNsaWVudE9iamVjdCA9IGNsaW50O1xuICAgICAgICB0aGlzLmRhdGFiYXNlID0gdGhpcy5jbGllbnRPYmplY3QuZGIodGhpcy5kYXRhYmFzZU5hbWUpO1xuICAgICAgfVxuICAgICAgaWYgKGVycm9yKXtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIENvbm5lY3RpbmcgdG8gdGhlIHNlcnZlcicpO1xuICAgICAgfVxuICAgICAgXG4gICAgfSk7IFxuICB9XG5cblxuICBpc0FsaXZlKCkge1xuICAgIGlmICh0aGlzLmNsaWVudE9iamVjdCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGFzeW5jIG5iVXNlcnMoKSB7XG4gICAgbGV0IHZhbHVlID0gMDtcbiAgICBpZiAodGhpcy5pc0FsaXZlKCkpIHtcbiAgICAgIGNvbnN0IHVzZXJzID0gdGhpcy5kYXRhYmFzZS5jb2xsZWN0aW9uKCd1c2VycycpO1xuICAgICAgdmFsdWUgPSBhd2FpdCB1c2Vycy5jb3VudERvY3VtZW50cygpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBhc3luYyBuYkZpbGVzKCkge1xuICAgIGxldCB2YWx1ZSA9IDA7XG4gICAgaWYgKHRoaXMuaXNBbGl2ZSgpKSB7XG4gICAgICBjb25zdCBmaWxlcyA9IHRoaXMuZGF0YWJhc2UuY29sbGVjdGlvbignZmlsZXMnKTtcbiAgICAgIHZhbHVlID0gYXdhaXQgZmlsZXMuY291bnREb2N1bWVudHMoKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5jb25zdCBkYkNsaWVudCA9IG5ldyBEQkNsaWVudCgpO1xubW9kdWxlLmV4cG9ydHMgPSBkYkNsaWVudDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNO0VBQUVBO0FBQVksQ0FBQyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQzFDLE1BQU07RUFBRUM7QUFBSSxDQUFDLEdBQUdELE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFFbEMsTUFBTUUsUUFBUSxDQUFDO0VBQ2JDLFdBQVdBLENBQUEsRUFBRztJQUNaLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUk7SUFDeEIsSUFBSSxDQUFDQyxRQUFRLEdBQUcsSUFBSTtJQUNwQixJQUFJSixHQUFHLENBQUNLLFdBQVcsRUFBRTtNQUNuQixJQUFJLENBQUNDLFlBQVksR0FBR04sR0FBRyxDQUFDSyxXQUFXO0lBQ3JDLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ0MsWUFBWSxHQUFHLGVBQWU7SUFDckM7SUFDQSxJQUFJTixHQUFHLENBQUNPLE9BQU8sSUFBSVAsR0FBRyxDQUFDUSxPQUFPLElBQUlSLEdBQUcsQ0FBQ0ssV0FBVyxFQUFFO01BQ2pELElBQUksQ0FBQ0ksR0FBRyxHQUFJLGFBQVlULEdBQUcsQ0FBQ1EsT0FBUSxJQUFHUixHQUFHLENBQUNPLE9BQVEsSUFBR1AsR0FBRyxDQUFDSyxXQUFZLEVBQUM7SUFDekUsQ0FBQyxNQUFNO01BQ0wsSUFBSSxDQUFDSSxHQUFHLEdBQUcseUNBQXlDO0lBQ3REO0lBQ0EsSUFBSUMsTUFBTSxHQUFHLElBQUlaLFdBQVcsQ0FBQyxJQUFJLENBQUNXLEdBQUcsRUFBRTtNQUFFRSxrQkFBa0IsRUFBRTtJQUFLLENBQUMsQ0FBQztJQUNwRUQsTUFBTSxDQUFDRSxPQUFPLENBQUMsT0FBT0MsS0FBSyxFQUFFQyxLQUFLLEtBQUs7TUFDckMsSUFBSUEsS0FBSyxFQUFFO1FBQ2hCQyxPQUFPLENBQUNDLEdBQUcsQ0FBQyx5QkFBeUIsQ0FBQztRQUMvQixJQUFJLENBQUNiLFlBQVksR0FBR1csS0FBSztRQUN6QixJQUFJLENBQUNWLFFBQVEsR0FBRyxJQUFJLENBQUNELFlBQVksQ0FBQ2MsRUFBRSxDQUFDLElBQUksQ0FBQ1gsWUFBWSxDQUFDO01BQ3pEO01BQ0EsSUFBSU8sS0FBSyxFQUFDO1FBQ1JFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdDQUFnQyxDQUFDO01BQy9DO0lBRUYsQ0FBQyxDQUFDO0VBQ0o7RUFHQUUsT0FBT0EsQ0FBQSxFQUFHO0lBQ1IsSUFBSSxJQUFJLENBQUNmLFlBQVksRUFBRTtNQUNyQixPQUFPLElBQUk7SUFDYjtJQUNBLE9BQU8sS0FBSztFQUNkO0VBRUEsTUFBTWdCLE9BQU9BLENBQUEsRUFBRztJQUNkLElBQUlDLEtBQUssR0FBRyxDQUFDO0lBQ2IsSUFBSSxJQUFJLENBQUNGLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDbEIsTUFBTUcsS0FBSyxHQUFHLElBQUksQ0FBQ2pCLFFBQVEsQ0FBQ2tCLFVBQVUsQ0FBQyxPQUFPLENBQUM7TUFDL0NGLEtBQUssR0FBRyxNQUFNQyxLQUFLLENBQUNFLGNBQWMsQ0FBQyxDQUFDO0lBQ3RDO0lBQ0EsT0FBT0gsS0FBSztFQUNkO0VBRUEsTUFBTUksT0FBT0EsQ0FBQSxFQUFHO0lBQ2QsSUFBSUosS0FBSyxHQUFHLENBQUM7SUFDYixJQUFJLElBQUksQ0FBQ0YsT0FBTyxDQUFDLENBQUMsRUFBRTtNQUNsQixNQUFNTyxLQUFLLEdBQUcsSUFBSSxDQUFDckIsUUFBUSxDQUFDa0IsVUFBVSxDQUFDLE9BQU8sQ0FBQztNQUMvQ0YsS0FBSyxHQUFHLE1BQU1LLEtBQUssQ0FBQ0YsY0FBYyxDQUFDLENBQUM7SUFDdEM7SUFDQSxPQUFPSCxLQUFLO0VBQ2Q7QUFDRjtBQUNBLE1BQU1NLFFBQVEsR0FBRyxJQUFJekIsUUFBUSxDQUFDLENBQUM7QUFDL0IwQixNQUFNLENBQUNDLE9BQU8sR0FBR0YsUUFBUSJ9","map":{"version":3,"names":["MongoClient","require","env","DBClient","constructor","clientObject","database","DB_DATABASE","databaseName","DB_PORT","DB_HOST","url","client","useUnifiedTopology","connect","error","clint","console","log","db","isAlive","nbUsers","value","users","collection","countDocuments","nbFiles","files","dbClient","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/utils/","sources":["db.js"],"sourcesContent":["const { MongoClient } = require('mongodb');\nconst { env } = require('process');\n\nclass DBClient {\n  constructor() {\n    this.clientObject = null;\n    this.database = null;\n    if (env.DB_DATABASE) {\n      this.databaseName = env.DB_DATABASE;\n    } else {\n      this.databaseName = 'files_manager';\n    }\n    if (env.DB_PORT && env.DB_HOST && env.DB_DATABASE) {\n      this.url = `mongodb://${env.DB_HOST}:${env.DB_PORT}/${env.DB_DATABASE}`;\n    } else {\n      this.url = 'mongodb://localhost:27017/files_manager';\n    }\n    let client = new MongoClient(this.url, { useUnifiedTopology: true });\n    client.connect(async (error, clint) => {\n      if (clint) {\n\tconsole.log('Connected to the server');\n        this.clientObject = clint;\n        this.database = this.clientObject.db(this.databaseName);\n      }\n      if (error){\n        console.log('Error Connecting to the server');\n      }\n      \n    }); \n  }\n\n\n  isAlive() {\n    if (this.clientObject) {\n      return true;\n    }\n    return false;\n  }\n\n  async nbUsers() {\n    let value = 0;\n    if (this.isAlive()) {\n      const users = this.database.collection('users');\n      value = await users.countDocuments();\n    }\n    return value;\n  }\n\n  async nbFiles() {\n    let value = 0;\n    if (this.isAlive()) {\n      const files = this.database.collection('files');\n      value = await files.countDocuments();\n    }\n    return value;\n  }\n}\nconst dbClient = new DBClient();\nmodule.exports = dbClient;\n"],"mappings":";;AAAA,MAAM;EAAEA;AAAY,CAAC,GAAGC,OAAO,CAAC,SAAS,CAAC;AAC1C,MAAM;EAAEC;AAAI,CAAC,GAAGD,OAAO,CAAC,SAAS,CAAC;AAElC,MAAME,QAAQ,CAAC;EACbC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,YAAY,GAAG,IAAI;IACxB,IAAI,CAACC,QAAQ,GAAG,IAAI;IACpB,IAAIJ,GAAG,CAACK,WAAW,EAAE;MACnB,IAAI,CAACC,YAAY,GAAGN,GAAG,CAACK,WAAW;IACrC,CAAC,MAAM;MACL,IAAI,CAACC,YAAY,GAAG,eAAe;IACrC;IACA,IAAIN,GAAG,CAACO,OAAO,IAAIP,GAAG,CAACQ,OAAO,IAAIR,GAAG,CAACK,WAAW,EAAE;MACjD,IAAI,CAACI,GAAG,GAAI,aAAYT,GAAG,CAACQ,OAAQ,IAAGR,GAAG,CAACO,OAAQ,IAAGP,GAAG,CAACK,WAAY,EAAC;IACzE,CAAC,MAAM;MACL,IAAI,CAACI,GAAG,GAAG,yCAAyC;IACtD;IACA,IAAIC,MAAM,GAAG,IAAIZ,WAAW,CAAC,IAAI,CAACW,GAAG,EAAE;MAAEE,kBAAkB,EAAE;IAAK,CAAC,CAAC;IACpED,MAAM,CAACE,OAAO,CAAC,OAAOC,KAAK,EAAEC,KAAK,KAAK;MACrC,IAAIA,KAAK,EAAE;QAChBC,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;QAC/B,IAAI,CAACb,YAAY,GAAGW,KAAK;QACzB,IAAI,CAACV,QAAQ,GAAG,IAAI,CAACD,YAAY,CAACc,EAAE,CAAC,IAAI,CAACX,YAAY,CAAC;MACzD;MACA,IAAIO,KAAK,EAAC;QACRE,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;MAC/C;IAEF,CAAC,CAAC;EACJ;EAGAE,OAAOA,CAAA,EAAG;IACR,IAAI,IAAI,CAACf,YAAY,EAAE;MACrB,OAAO,IAAI;IACb;IACA,OAAO,KAAK;EACd;EAEA,MAAMgB,OAAOA,CAAA,EAAG;IACd,IAAIC,KAAK,GAAG,CAAC;IACb,IAAI,IAAI,CAACF,OAAO,CAAC,CAAC,EAAE;MAClB,MAAMG,KAAK,GAAG,IAAI,CAACjB,QAAQ,CAACkB,UAAU,CAAC,OAAO,CAAC;MAC/CF,KAAK,GAAG,MAAMC,KAAK,CAACE,cAAc,CAAC,CAAC;IACtC;IACA,OAAOH,KAAK;EACd;EAEA,MAAMI,OAAOA,CAAA,EAAG;IACd,IAAIJ,KAAK,GAAG,CAAC;IACb,IAAI,IAAI,CAACF,OAAO,CAAC,CAAC,EAAE;MAClB,MAAMO,KAAK,GAAG,IAAI,CAACrB,QAAQ,CAACkB,UAAU,CAAC,OAAO,CAAC;MAC/CF,KAAK,GAAG,MAAMK,KAAK,CAACF,cAAc,CAAC,CAAC;IACtC;IACA,OAAOH,KAAK;EACd;AACF;AACA,MAAMM,QAAQ,GAAG,IAAIzB,QAAQ,CAAC,CAAC;AAC/B0B,MAAM,CAACC,OAAO,GAAGF,QAAQ"}},"mtime":1709652687047},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/babel.config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nmodule.exports = {\n  presets: [['@babel/preset-env', {\n    targets: {\n      node: 'current'\n    }\n  }]]\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicHJlc2V0cyIsInRhcmdldHMiLCJub2RlIl0sInNvdXJjZVJvb3QiOiIvcm9vdC9BTFgtQmFja2VuZC9hbHgtZmlsZXNfbWFuYWdlci8iLCJzb3VyY2VzIjpbImJhYmVsLmNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBwcmVzZXRzOiBbXG4gICAgICBbXG4gICAgICAgICdAYmFiZWwvcHJlc2V0LWVudicsXG4gICAgICAgIHtcbiAgICAgICAgICB0YXJnZXRzOiB7XG4gICAgICAgICAgICBub2RlOiAnY3VycmVudCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgXSxcbn07XG4iXSwibWFwcGluZ3MiOiI7O0FBQUFBLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHO0VBQ2JDLE9BQU8sRUFBRSxDQUNQLENBQ0UsbUJBQW1CLEVBQ25CO0lBQ0VDLE9BQU8sRUFBRTtNQUNQQyxJQUFJLEVBQUU7SUFDUjtFQUNGLENBQUMsQ0FDRjtBQUVQLENBQUMifQ==","map":{"version":3,"names":["module","exports","presets","targets","node"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/","sources":["babel.config.js"],"sourcesContent":["module.exports = {\n    presets: [\n      [\n        '@babel/preset-env',\n        {\n          targets: {\n            node: 'current',\n          },\n        },\n      ],\n    ],\n};\n"],"mappings":";;AAAAA,MAAM,CAACC,OAAO,GAAG;EACbC,OAAO,EAAE,CACP,CACE,mBAAmB,EACnB;IACEC,OAAO,EAAE;MACPC,IAAI,EAAE;IACR;EACF,CAAC,CACF;AAEP,CAAC"}},"mtime":1708261023003},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst express = require('express');\nconst routes = require('./routes/index');\nconst env = require('process');\nconst app = express();\nconst port = env.PORT || 5000;\napp.use('/', routes);\napp.listen(port);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJvdXRlcyIsImVudiIsImFwcCIsInBvcnQiLCJQT1JUIiwidXNlIiwibGlzdGVuIl0sInNvdXJjZVJvb3QiOiIvcm9vdC9BTFgtQmFja2VuZC9hbHgtZmlsZXNfbWFuYWdlci8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3Qgcm91dGVzID0gcmVxdWlyZSgnLi9yb3V0ZXMvaW5kZXgnKVxuY29uc3QgZW52ID0gcmVxdWlyZSgncHJvY2VzcycpO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuY29uc3QgcG9ydCA9IGVudi5QT1JUIHx8IDUwMDA7XG5hcHAudXNlKCcvJywgcm91dGVzKTtcbmFwcC5saXN0ZW4ocG9ydCk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLGdCQUFnQixDQUFDO0FBQ3hDLE1BQU1FLEdBQUcsR0FBR0YsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUM5QixNQUFNRyxHQUFHLEdBQUdKLE9BQU8sQ0FBQyxDQUFDO0FBQ3JCLE1BQU1LLElBQUksR0FBR0YsR0FBRyxDQUFDRyxJQUFJLElBQUksSUFBSTtBQUM3QkYsR0FBRyxDQUFDRyxHQUFHLENBQUMsR0FBRyxFQUFFTCxNQUFNLENBQUM7QUFDcEJFLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDSCxJQUFJLENBQUMifQ==","map":{"version":3,"names":["express","require","routes","env","app","port","PORT","use","listen"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/","sources":["server.js"],"sourcesContent":["const express = require('express');\nconst routes = require('./routes/index')\nconst env = require('process');\nconst app = express();\nconst port = env.PORT || 5000;\napp.use('/', routes);\napp.listen(port);\n"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,MAAM,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AACxC,MAAME,GAAG,GAAGF,OAAO,CAAC,SAAS,CAAC;AAC9B,MAAMG,GAAG,GAAGJ,OAAO,CAAC,CAAC;AACrB,MAAMK,IAAI,GAAGF,GAAG,CAACG,IAAI,IAAI,IAAI;AAC7BF,GAAG,CAACG,GAAG,CAAC,GAAG,EAAEL,MAAM,CAAC;AACpBE,GAAG,CAACI,MAAM,CAACH,IAAI,CAAC"}},"mtime":1709652649783},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/routes/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/routes/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst router = require('express').Router();\nconst appCtrl = require('../controllers/AppController');\nconst userCtrl = require('../controllers/UsersController');\nconst authCtrl = require('../controllers/AuthController');\nconst fileCtrl = require('../controllers/FilesController');\nconst urlDecoder = require('qs');\nrouter.get('/status', (req, res) => {\n  appCtrl.getStatus(res);\n});\nrouter.get('/stats', (req, res) => {\n  appCtrl.getStats(res);\n});\nrouter.post('/users', (req, res) => {\n  req.on('data', i => {\n    let data = JSON.parse(String(i));\n    if (!data.email) {\n      res.status(400).send({\n        \"error\": \"Missing email\"\n      });\n    }\n    if (!data.password) {\n      res.status(400).send({\n        \"error\": \"Missing password\"\n      });\n    }\n    if (data.email && data.password) {\n      userCtrl.postNew(req, res, data.email, data.password);\n    }\n  });\n});\nrouter.get('/connect', (req, res) => {\n  authCtrl.getConnect(req, res);\n});\nrouter.get('/disconnect', (req, res) => {\n  authCtrl.getDisconnect(req, res);\n});\nrouter.get('/users/me', (req, res) => {\n  userCtrl.getMe(req, res);\n});\nrouter.post('/files', (req, res) => {\n  fileCtrl.postUpload(req, res);\n});\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJyZXF1aXJlIiwiUm91dGVyIiwiYXBwQ3RybCIsInVzZXJDdHJsIiwiYXV0aEN0cmwiLCJmaWxlQ3RybCIsInVybERlY29kZXIiLCJnZXQiLCJyZXEiLCJyZXMiLCJnZXRTdGF0dXMiLCJnZXRTdGF0cyIsInBvc3QiLCJvbiIsImkiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwiU3RyaW5nIiwiZW1haWwiLCJzdGF0dXMiLCJzZW5kIiwicGFzc3dvcmQiLCJwb3N0TmV3IiwiZ2V0Q29ubmVjdCIsImdldERpc2Nvbm5lY3QiLCJnZXRNZSIsInBvc3RVcGxvYWQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvcm9vdC9BTFgtQmFja2VuZC9hbHgtZmlsZXNfbWFuYWdlci9yb3V0ZXMvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByb3V0ZXIgPSByZXF1aXJlKCdleHByZXNzJykuUm91dGVyKCk7XG5jb25zdCBhcHBDdHJsID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvQXBwQ29udHJvbGxlcicpO1xuY29uc3QgdXNlckN0cmwgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9Vc2Vyc0NvbnRyb2xsZXInKTtcbmNvbnN0IGF1dGhDdHJsID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvQXV0aENvbnRyb2xsZXInKTtcbmNvbnN0IGZpbGVDdHJsID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvRmlsZXNDb250cm9sbGVyJyk7XG5jb25zdCB1cmxEZWNvZGVyID0gcmVxdWlyZSgncXMnKTtcbnJvdXRlci5nZXQoJy9zdGF0dXMnLCAocmVxLCByZXMpPT57XG4gIGFwcEN0cmwuZ2V0U3RhdHVzKHJlcyk7XG59KVxucm91dGVyLmdldCgnL3N0YXRzJywgKHJlcSwgcmVzKT0+e1xuICBhcHBDdHJsLmdldFN0YXRzKHJlcyk7XG59KVxucm91dGVyLnBvc3QoJy91c2VycycsIChyZXEsIHJlcyk9PntcbnJlcS5vbignZGF0YScsIChpKT0+e1xuICBsZXQgZGF0YSA9IEpTT04ucGFyc2UoU3RyaW5nKGkpKTtcbiAgaWYgKCFkYXRhLmVtYWlsKXtcbiAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XCJlcnJvclwiOlwiTWlzc2luZyBlbWFpbFwifSk7XG4gIH1cbiAgaWYgKCFkYXRhLnBhc3N3b3JkKXtcbiAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XCJlcnJvclwiOlwiTWlzc2luZyBwYXNzd29yZFwifSk7XG4gIH1cbiAgaWYgKGRhdGEuZW1haWwgJiYgZGF0YS5wYXNzd29yZCl7XG4gICAgdXNlckN0cmwucG9zdE5ldyhyZXEsIHJlcywgZGF0YS5lbWFpbCwgZGF0YS5wYXNzd29yZCk7XG4gIH1cbn0pXG59KVxucm91dGVyLmdldCgnL2Nvbm5lY3QnLCAocmVxLCByZXMpPT57XG4gIGF1dGhDdHJsLmdldENvbm5lY3QocmVxLCByZXMpO1xufSlcbnJvdXRlci5nZXQoJy9kaXNjb25uZWN0JywgKHJlcSwgcmVzKT0+e1xuICBhdXRoQ3RybC5nZXREaXNjb25uZWN0KHJlcSwgcmVzKTtcbn0pXG5yb3V0ZXIuZ2V0KCcvdXNlcnMvbWUnLCAocmVxLCByZXMpPT57XG4gIHVzZXJDdHJsLmdldE1lKHJlcSwgcmVzKTtcbn0pXG5yb3V0ZXIucG9zdCgnL2ZpbGVzJywgKHJlcSwgcmVzKT0+e1xuICBmaWxlQ3RybC5wb3N0VXBsb2FkKHJlcSwgcmVzKTtcbn0pXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQ0MsTUFBTSxDQUFDLENBQUM7QUFDMUMsTUFBTUMsT0FBTyxHQUFHRixPQUFPLENBQUMsOEJBQThCLENBQUM7QUFDdkQsTUFBTUcsUUFBUSxHQUFHSCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFDMUQsTUFBTUksUUFBUSxHQUFHSixPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDekQsTUFB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","map":{"version":3,"names":["router","require","Router","appCtrl","userCtrl","authCtrl","fileCtrl","urlDecoder","get","req","res","getStatus","getStats","post","on","i","data","JSON","parse","String","email","status","send","password","postNew","getConnect","getDisconnect","getMe","postUpload","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/routes/","sources":["index.js"],"sourcesContent":["const router = require('express').Router();\nconst appCtrl = require('../controllers/AppController');\nconst userCtrl = require('../controllers/UsersController');\nconst authCtrl = require('../controllers/AuthController');\nconst fileCtrl = require('../controllers/FilesController');\nconst urlDecoder = require('qs');\nrouter.get('/status', (req, res)=>{\n  appCtrl.getStatus(res);\n})\nrouter.get('/stats', (req, res)=>{\n  appCtrl.getStats(res);\n})\nrouter.post('/users', (req, res)=>{\nreq.on('data', (i)=>{\n  let data = JSON.parse(String(i));\n  if (!data.email){\n    res.status(400).send({\"error\":\"Missing email\"});\n  }\n  if (!data.password){\n    res.status(400).send({\"error\":\"Missing password\"});\n  }\n  if (data.email && data.password){\n    userCtrl.postNew(req, res, data.email, data.password);\n  }\n})\n})\nrouter.get('/connect', (req, res)=>{\n  authCtrl.getConnect(req, res);\n})\nrouter.get('/disconnect', (req, res)=>{\n  authCtrl.getDisconnect(req, res);\n})\nrouter.get('/users/me', (req, res)=>{\n  userCtrl.getMe(req, res);\n})\nrouter.post('/files', (req, res)=>{\n  fileCtrl.postUpload(req, res);\n})\nmodule.exports = router;\n"],"mappings":";;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,SAAS,CAAC,CAACC,MAAM,CAAC,CAAC;AAC1C,MAAMC,OAAO,GAAGF,OAAO,CAAC,8BAA8B,CAAC;AACvD,MAAMG,QAAQ,GAAGH,OAAO,CAAC,gCAAgC,CAAC;AAC1D,MAAMI,QAAQ,GAAGJ,OAAO,CAAC,+BAA+B,CAAC;AACzD,MAAMK,QAAQ,GAAGL,OAAO,CAAC,gCAAgC,CAAC;AAC1D,MAAMM,UAAU,GAAGN,OAAO,CAAC,IAAI,CAAC;AAChCD,MAAM,CAACQ,GAAG,CAAC,SAAS,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAG;EAChCP,OAAO,CAACQ,SAAS,CAACD,GAAG,CAAC;AACxB,CAAC,CAAC;AACFV,MAAM,CAACQ,GAAG,CAAC,QAAQ,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAG;EAC/BP,OAAO,CAACS,QAAQ,CAACF,GAAG,CAAC;AACvB,CAAC,CAAC;AACFV,MAAM,CAACa,IAAI,CAAC,QAAQ,EAAE,CAACJ,GAAG,EAAEC,GAAG,KAAG;EAClCD,GAAG,CAACK,EAAE,CAAC,MAAM,EAAGC,CAAC,IAAG;IAClB,IAAIC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,MAAM,CAACJ,CAAC,CAAC,CAAC;IAChC,IAAI,CAACC,IAAI,CAACI,KAAK,EAAC;MACdV,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAC,OAAO,EAAC;MAAe,CAAC,CAAC;IACjD;IACA,IAAI,CAACN,IAAI,CAACO,QAAQ,EAAC;MACjBb,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAC,OAAO,EAAC;MAAkB,CAAC,CAAC;IACpD;IACA,IAAIN,IAAI,CAACI,KAAK,IAAIJ,IAAI,CAACO,QAAQ,EAAC;MAC9BnB,QAAQ,CAACoB,OAAO,CAACf,GAAG,EAAEC,GAAG,EAAEM,IAAI,CAACI,KAAK,EAAEJ,IAAI,CAACO,QAAQ,CAAC;IACvD;EACF,CAAC,CAAC;AACF,CAAC,CAAC;AACFvB,MAAM,CAACQ,GAAG,CAAC,UAAU,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAG;EACjCL,QAAQ,CAACoB,UAAU,CAAChB,GAAG,EAAEC,GAAG,CAAC;AAC/B,CAAC,CAAC;AACFV,MAAM,CAACQ,GAAG,CAAC,aAAa,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAG;EACpCL,QAAQ,CAACqB,aAAa,CAACjB,GAAG,EAAEC,GAAG,CAAC;AAClC,CAAC,CAAC;AACFV,MAAM,CAACQ,GAAG,CAAC,WAAW,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAG;EAClCN,QAAQ,CAACuB,KAAK,CAAClB,GAAG,EAAEC,GAAG,CAAC;AAC1B,CAAC,CAAC;AACFV,MAAM,CAACa,IAAI,CAAC,QAAQ,EAAE,CAACJ,GAAG,EAAEC,GAAG,KAAG;EAChCJ,QAAQ,CAACsB,UAAU,CAACnB,GAAG,EAAEC,GAAG,CAAC;AAC/B,CAAC,CAAC;AACFmB,MAAM,CAACC,OAAO,GAAG9B,MAAM"}},"mtime":1709652607071},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/controllers/AppController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst redisClient = require('../utils/redis');\nconst mongoClient = require('../utils/db');\nlet userCount;\nlet fileCount;\nclass AppController {\n  constructor() {\n    this.getStats = async res => {\n      userCount = await mongoClient.nbUsers();\n      fileCount = await mongoClient.nbFiles();\n      let result = {\n        \"users\": userCount,\n        \"files\": fileCount\n      };\n      res.status(200).send(result);\n    };\n    this.getStatus = res => {\n      let result = {\n        \"redis\": redisClient.isAlive(),\n        \"db\": mongoClient.isAlive()\n      };\n      res.status(200).send(result);\n    };\n  }\n}\nconst appContrllr = new AppController();\nmodule.exports = appContrllr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWRpc0NsaWVudCIsInJlcXVpcmUiLCJtb25nb0NsaWVudCIsInVzZXJDb3VudCIsImZpbGVDb3VudCIsIkFwcENvbnRyb2xsZXIiLCJjb25zdHJ1Y3RvciIsImdldFN0YXRzIiwicmVzIiwibmJVc2VycyIsIm5iRmlsZXMiLCJyZXN1bHQiLCJzdGF0dXMiLCJzZW5kIiwiZ2V0U3RhdHVzIiwiaXNBbGl2ZSIsImFwcENvbnRybGxyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL3Jvb3QvQUxYLUJhY2tlbmQvYWx4LWZpbGVzX21hbmFnZXIvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJBcHBDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHJlZGlzQ2xpZW50ID0gcmVxdWlyZSgnLi4vdXRpbHMvcmVkaXMnKTtcbmNvbnN0IG1vbmdvQ2xpZW50ID0gcmVxdWlyZSgnLi4vdXRpbHMvZGInKTtcbmxldCB1c2VyQ291bnQ7XG5sZXQgZmlsZUNvdW50O1xuY2xhc3MgQXBwQ29udHJvbGxlcntcbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLmdldFN0YXRzID0gYXN5bmMgKHJlcyk9PntcbiAgICAgIHVzZXJDb3VudCA9IGF3YWl0IG1vbmdvQ2xpZW50Lm5iVXNlcnMoKTtcbiAgICAgIGZpbGVDb3VudCA9IGF3YWl0IG1vbmdvQ2xpZW50Lm5iRmlsZXMoKTtcbiAgICAgIGxldCByZXN1bHQgPSB7IFwidXNlcnNcIjogdXNlckNvdW50LCBcImZpbGVzXCI6IGZpbGVDb3VudCB9O1xuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocmVzdWx0KTtcbiAgICB9XG4gICAgdGhpcy5nZXRTdGF0dXMgPSAocmVzKSA9PntcbiAgICAgIGxldCByZXN1bHQgPSB7IFwicmVkaXNcIjogcmVkaXNDbGllbnQuaXNBbGl2ZSgpLCBcImRiXCI6IG1vbmdvQ2xpZW50LmlzQWxpdmUoKSB9O1xuICAgICAgcmVzLnN0YXR1cygyMDApLnNlbmQocmVzdWx0KTtcdCAgICBcbiAgICB9XG4gIH1cbn1cbmNvbnN0IGFwcENvbnRybGxyID0gbmV3IEFwcENvbnRyb2xsZXIoKVxubW9kdWxlLmV4cG9ydHMgPSBhcHBDb250cmxscjtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUM3QyxNQUFNQyxXQUFXLEdBQUdELE9BQU8sQ0FBQyxhQUFhLENBQUM7QUFDMUMsSUFBSUUsU0FBUztBQUNiLElBQUlDLFNBQVM7QUFDYixNQUFNQyxhQUFhO0VBQ2pCQyxXQUFXQSxDQUFBLEVBQUU7SUFDWCxJQUFJLENBQUNDLFFBQVEsR0FBRyxNQUFPQyxHQUFHLElBQUc7TUFDM0JMLFNBQVMsR0FBRyxNQUFNRCxXQUFXLENBQUNPLE9BQU8sQ0FBQyxDQUFDO01BQ3ZDTCxTQUFTLEdBQUcsTUFBTUYsV0FBVyxDQUFDUSxPQUFPLENBQUMsQ0FBQztNQUN2QyxJQUFJQyxNQUFNLEdBQUc7UUFBRSxPQUFPLEVBQUVSLFNBQVM7UUFBRSxPQUFPLEVBQUVDO01BQVUsQ0FBQztNQUN2REksR0FBRyxDQUFDSSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQ0YsTUFBTSxDQUFDO0lBQzlCLENBQUM7SUFDRCxJQUFJLENBQUNHLFNBQVMsR0FBSU4sR0FBRyxJQUFJO01BQ3ZCLElBQUlHLE1BQU0sR0FBRztRQUFFLE9BQU8sRUFBRVgsV0FBVyxDQUFDZSxPQUFPLENBQUMsQ0FBQztRQUFFLElBQUksRUFBRWIsV0FBVyxDQUFDYSxPQUFPLENBQUM7TUFBRSxDQUFDO01BQzVFUCxHQUFHLENBQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDRixNQUFNLENBQUM7SUFDOUIsQ0FBQztFQUNIO0FBQ0Y7QUFDQSxNQUFNSyxXQUFXLEdBQUcsSUFBSVgsYUFBYSxDQUFDLENBQUM7QUFDdkNZLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHRixXQUFXIn0=","map":{"version":3,"names":["redisClient","require","mongoClient","userCount","fileCount","AppController","constructor","getStats","res","nbUsers","nbFiles","result","status","send","getStatus","isAlive","appContrllr","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/controllers/","sources":["AppController.js"],"sourcesContent":["const redisClient = require('../utils/redis');\nconst mongoClient = require('../utils/db');\nlet userCount;\nlet fileCount;\nclass AppController{\n  constructor(){\n    this.getStats = async (res)=>{\n      userCount = await mongoClient.nbUsers();\n      fileCount = await mongoClient.nbFiles();\n      let result = { \"users\": userCount, \"files\": fileCount };\n      res.status(200).send(result);\n    }\n    this.getStatus = (res) =>{\n      let result = { \"redis\": redisClient.isAlive(), \"db\": mongoClient.isAlive() };\n      res.status(200).send(result);\t    \n    }\n  }\n}\nconst appContrllr = new AppController()\nmodule.exports = appContrllr;\n"],"mappings":";;AAAA,MAAMA,WAAW,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AAC7C,MAAMC,WAAW,GAAGD,OAAO,CAAC,aAAa,CAAC;AAC1C,IAAIE,SAAS;AACb,IAAIC,SAAS;AACb,MAAMC,aAAa;EACjBC,WAAWA,CAAA,EAAE;IACX,IAAI,CAACC,QAAQ,GAAG,MAAOC,GAAG,IAAG;MAC3BL,SAAS,GAAG,MAAMD,WAAW,CAACO,OAAO,CAAC,CAAC;MACvCL,SAAS,GAAG,MAAMF,WAAW,CAACQ,OAAO,CAAC,CAAC;MACvC,IAAIC,MAAM,GAAG;QAAE,OAAO,EAAER,SAAS;QAAE,OAAO,EAAEC;MAAU,CAAC;MACvDI,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACF,MAAM,CAAC;IAC9B,CAAC;IACD,IAAI,CAACG,SAAS,GAAIN,GAAG,IAAI;MACvB,IAAIG,MAAM,GAAG;QAAE,OAAO,EAAEX,WAAW,CAACe,OAAO,CAAC,CAAC;QAAE,IAAI,EAAEb,WAAW,CAACa,OAAO,CAAC;MAAE,CAAC;MAC5EP,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACF,MAAM,CAAC;IAC9B,CAAC;EACH;AACF;AACA,MAAMK,WAAW,GAAG,IAAIX,aAAa,CAAC,CAAC;AACvCY,MAAM,CAACC,OAAO,GAAGF,WAAW"}},"mtime":1708612889305},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/controllers/UsersController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst db = require('../utils/db');\nconst sha = require('sha1');\nconst cache = require('../utils/redis');\nclass UsersController {\n  constructor() {\n    this.postNew = async (request, response, email, password) => {\n      if (!email) {\n        response.status(400).send({\n          \"error\": \"Missing email\"\n        });\n      }\n      if (!password) {\n        response.status(400).send({\n          \"error\": \"Missing password\"\n        });\n      }\n      let user = await db.database.collection('users').find({\n        email: email\n      }).count();\n      if (!user) {\n        let collection = db.database.collection('users');\n        collection.insertOne({\n          email: email,\n          password: sha(password)\n        }, (err, result) => {\n          if (!err) {\n            let id = result.ops[0]._id;\n            let email = result.ops[0].email;\n            response.status(201).send({\n              \"id\": id,\n              \"email\": email\n            });\n          }\n        });\n      } else {\n        response.status(400).send({\n          \"error\": \"Already exist\"\n        });\n      }\n    };\n    this.getMe = async (req, res) => {\n      console.log(db.database.insertOne);\n      let token = req.header('X-Token');\n      if (token) {\n        let userId = await cache.get('auth_' + token);\n        if (userId) {\n          db.database.collection('users').find({}).toArray((err, result) => {\n            let exists = false;\n            for (let i = 0; i < result.length; i++) {\n              if (result[i]._id.toString() === userId) {\n                exists = true;\n                let id = result[i]._id.toString();\n                let email = result[i].email;\n                res.status(200).send({\n                  \"id\": id,\n                  \"email\": email\n                });\n              }\n            }\n            if (!exists) {\n              res.status(401).send({\n                \"error\": \"Unauthorized\"\n              });\n            }\n          });\n        } else {\n          res.status(401).send({\n            \"error\": \"Unauthorized\"\n          });\n        }\n      } else {\n        res.status(401).send({\n          \"error\": \"Unauthorized\"\n        });\n      }\n    };\n  }\n}\nconst userCont = new UsersController();\nmodule.exports = userCont;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkYiIsInJlcXVpcmUiLCJzaGEiLCJjYWNoZSIsIlVzZXJzQ29udHJvbGxlciIsImNvbnN0cnVjdG9yIiwicG9zdE5ldyIsInJlcXVlc3QiLCJyZXNwb25zZSIsImVtYWlsIiwicGFzc3dvcmQiLCJzdGF0dXMiLCJzZW5kIiwidXNlciIsImRhdGFiYXNlIiwiY29sbGVjdGlvbiIsImZpbmQiLCJjb3VudCIsImluc2VydE9uZSIsImVyciIsInJlc3VsdCIsImlkIiwib3BzIiwiX2lkIiwiZ2V0TWUiLCJyZXEiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwidG9rZW4iLCJoZWFkZXIiLCJ1c2VySWQiLCJnZXQiLCJ0b0FycmF5IiwiZXhpc3RzIiwiaSIsImxlbmd0aCIsInRvU3RyaW5nIiwidXNlckNvbnQiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvcm9vdC9BTFgtQmFja2VuZC9hbHgtZmlsZXNfbWFuYWdlci9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIlVzZXJzQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkYiA9IHJlcXVpcmUoJy4uL3V0aWxzL2RiJyk7XG5jb25zdCBzaGEgPSByZXF1aXJlKCdzaGExJyk7XG5jb25zdCBjYWNoZSA9IHJlcXVpcmUoJy4uL3V0aWxzL3JlZGlzJyk7XG5cblxuY2xhc3MgVXNlcnNDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IgKCl7XG4gIHRoaXMucG9zdE5ldyA9IGFzeW5jIChyZXF1ZXN0LCByZXNwb25zZSwgZW1haWwsIHBhc3N3b3JkKSA9PntcbiAgICBpZiAoIWVtYWlsKXtcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyg0MDApLnNlbmQoe1wiZXJyb3JcIjpcIk1pc3NpbmcgZW1haWxcIn0pXG4gICAgfVxuICAgIGlmICghcGFzc3dvcmQpIHtcbiAgICAgIHJlc3BvbnNlLnN0YXR1cyg0MDApLnNlbmQoe1wiZXJyb3JcIjpcIk1pc3NpbmcgcGFzc3dvcmRcIn0pO1xuICAgIH1cbiAgICBsZXQgdXNlciA9IGF3YWl0IGRiLmRhdGFiYXNlLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZCh7ZW1haWw6IGVtYWlsfSkuY291bnQoKTtcbiAgICBpZiAoIXVzZXIpe1xuICAgICAgbGV0IGNvbGxlY3Rpb24gPSBkYi5kYXRhYmFzZS5jb2xsZWN0aW9uKCd1c2VycycpO1xuICAgICAgY29sbGVjdGlvbi5pbnNlcnRPbmUoe2VtYWlsOiBlbWFpbCwgcGFzc3dvcmQ6IHNoYShwYXNzd29yZCl9LCAoZXJyLCByZXN1bHQpPT57XG4gICAgICAgIGlmICghZXJyKXtcblx0ICBsZXQgaWQgPSByZXN1bHQub3BzWzBdLl9pZDtcblx0ICBsZXQgZW1haWwgPSByZXN1bHQub3BzWzBdLmVtYWlsO1xuICAgICAgICAgIHJlc3BvbnNlLnN0YXR1cygyMDEpLnNlbmQoe1wiaWRcIjogaWQsIFwiZW1haWxcIjogZW1haWx9KTtcblx0fVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzcG9uc2Uuc3RhdHVzKDQwMCkuc2VuZCh7XCJlcnJvclwiOlwiQWxyZWFkeSBleGlzdFwifSk7XG4gICAgfVxuICB9XG4gIHRoaXMuZ2V0TWUgPSBhc3luYyAocmVxLCByZXMpPT57XHQgIFxuXHQgIGNvbnNvbGUubG9nKGRiLmRhdGFiYXNlLmluc2VydE9uZSk7XG4gICAgbGV0IHRva2VuID0gcmVxLmhlYWRlcignWC1Ub2tlbicpO1xuICAgIGlmICh0b2tlbil7XG4gICAgICBsZXQgdXNlcklkID0gYXdhaXQgY2FjaGUuZ2V0KCdhdXRoXycgKyB0b2tlbik7XG4gICAgICBpZiAodXNlcklkKXtcbiAgICAgICAgZGIuZGF0YWJhc2UuY29sbGVjdGlvbigndXNlcnMnKS5maW5kKHt9KS50b0FycmF5KChlcnIsIHJlc3VsdCk9Pntcblx0ICBsZXQgZXhpc3RzID0gZmFsc2U7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYgKHJlc3VsdFtpXS5faWQudG9TdHJpbmcoKSA9PT0gdXNlcklkKXtcblx0ICAgICAgZXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgbGV0IGlkID0gcmVzdWx0W2ldLl9pZC50b1N0cmluZygpO1xuXHQgICAgICBsZXQgZW1haWwgPSByZXN1bHRbaV0uZW1haWw7XG5cdCAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKHtcImlkXCI6IGlkLCBcImVtYWlsXCI6IGVtYWlsfSlcblx0ICAgIH1cblx0ICB9XG4gICAgICAgICAgaWYgKCFleGlzdHMpe1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1wiZXJyb3JcIjpcIlVuYXV0aG9yaXplZFwifSk7XG5cdCAgfVxuXHR9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1wiZXJyb3JcIjpcIlVuYXV0aG9yaXplZFwifSk7XG4gICAgICB9XG4gICAgfWVsc2V7XG4gICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XCJlcnJvclwiOlwiVW5hdXRob3JpemVkXCJ9KTtcbiAgICB9XG4gIH1cbiAgfVxuXG59XG5jb25zdCB1c2VyQ29udCA9IG5ldyBVc2Vyc0NvbnRyb2xsZXIoKTtcbm1vZHVsZS5leHBvcnRzID0gdXNlckNvbnQ7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsRUFBRSxHQUFHQyxPQUFPLENBQUMsYUFBYSxDQUFDO0FBQ2pDLE1BQU1DLEdBQUcsR0FBR0QsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUMzQixNQUFNRSxLQUFLLEdBQUdGLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUd2QyxNQUFNRyxlQUFlLENBQUM7RUFDcEJDLFdBQVdBLENBQUEsRUFBRztJQUNkLElBQUksQ0FBQ0MsT0FBTyxHQUFHLE9BQU9DLE9BQU8sRUFBRUMsUUFBUSxFQUFFQyxLQUFLLEVBQUVDLFFBQVEsS0FBSTtNQUMxRCxJQUFJLENBQUNELEtBQUssRUFBQztRQUNURCxRQUFRLENBQUNHLE1BQU0sQ0FBQyxHQUFH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","map":{"version":3,"names":["db","require","sha","cache","UsersController","constructor","postNew","request","response","email","password","status","send","user","database","collection","find","count","insertOne","err","result","id","ops","_id","getMe","req","res","console","log","token","header","userId","get","toArray","exists","i","length","toString","userCont","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/controllers/","sources":["UsersController.js"],"sourcesContent":["const db = require('../utils/db');\nconst sha = require('sha1');\nconst cache = require('../utils/redis');\n\n\nclass UsersController {\n  constructor (){\n  this.postNew = async (request, response, email, password) =>{\n    if (!email){\n      response.status(400).send({\"error\":\"Missing email\"})\n    }\n    if (!password) {\n      response.status(400).send({\"error\":\"Missing password\"});\n    }\n    let user = await db.database.collection('users').find({email: email}).count();\n    if (!user){\n      let collection = db.database.collection('users');\n      collection.insertOne({email: email, password: sha(password)}, (err, result)=>{\n        if (!err){\n\t  let id = result.ops[0]._id;\n\t  let email = result.ops[0].email;\n          response.status(201).send({\"id\": id, \"email\": email});\n\t}\n      })\n    } else {\n      response.status(400).send({\"error\":\"Already exist\"});\n    }\n  }\n  this.getMe = async (req, res)=>{\t  \n\t  console.log(db.database.insertOne);\n    let token = req.header('X-Token');\n    if (token){\n      let userId = await cache.get('auth_' + token);\n      if (userId){\n        db.database.collection('users').find({}).toArray((err, result)=>{\n\t  let exists = false;\n          for (let i = 0; i < result.length; i++){\n            if (result[i]._id.toString() === userId){\n\t      exists = true;\n              let id = result[i]._id.toString();\n\t      let email = result[i].email;\n\t      res.status(200).send({\"id\": id, \"email\": email})\n\t    }\n\t  }\n          if (!exists){\n            res.status(401).send({\"error\":\"Unauthorized\"});\n\t  }\n\t})\n      } else {\n        res.status(401).send({\"error\":\"Unauthorized\"});\n      }\n    }else{\n      res.status(401).send({\"error\":\"Unauthorized\"});\n    }\n  }\n  }\n\n}\nconst userCont = new UsersController();\nmodule.exports = userCont;\n"],"mappings":"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"}},"mtime":1709451143147},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/controllers/AuthController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst authCtrl = require('../controllers/AuthController');\nconst basicAuth = require('base64-js');\nconst database = require('../utils/db');\nconst cache = require('../utils/redis');\nconst sha = require('sha1');\nconst uuid = require('uuid');\nclass AuthController {\n  constructor() {\n    this.getConnect = (req, res) => {\n      if (req.header(\"Authorization\")) {\n        let authCode = req.header(\"Authorization\").split(' ')[1];\n        try {\n          let byteCode = basicAuth.toByteArray(authCode);\n          let emailAndPassword = new TextDecoder().decode(byteCode);\n          if (!emailAndPassword.includes(':')) {\n            res.status(401).send({\n              \"error\": \"Unauthorized\"\n            });\n          }\n          emailAndPassword = emailAndPassword.split(':');\n          let email = emailAndPassword[0];\n          let hashedPassword = sha(emailAndPassword[1]);\n          let user = database.database.collection('users').find({\n            'email': email,\n            'password': hashedPassword\n          }).toArray((err, result) => {\n            if (!err) {\n              if (result.length) {\n                let userResult = result[0];\n                let token = uuid.v4();\n                cache.set(\"auth_\" + token, userResult._id.toString(), 86400);\n                res.status(200).send({\n                  'token': token\n                });\n              } else {\n                res.status(401).send({\n                  \"error\": \"Unauthorized\"\n                });\n              }\n            }\n          });\n        } catch (e) {\n          console.log(e);\n          res.status(401).send({\n            \"error\": \"Unauthorized\"\n          });\n        }\n      } else {\n        res.status(401).send({\n          \"error\": \"Unauthorized\"\n        });\n      }\n    };\n    this.getDisconnect = async (req, res) => {\n      let tokenSupplied = req.header(\"X-Token\");\n      if (!tokenSupplied) {\n        res.status(401).send({\n          \"error\": \"Unauthorized\"\n        });\n      }\n      let userId = await cache.get('auth_' + tokenSupplied);\n      if (userId) {\n        let usr = database.database.collection('users').find({}).toArray((err, result) => {\n          if (!err) {\n            if (result.length) {\n              let found = false;\n              for (let i = 0; i < result.length; i++) {\n                if (result[i]._id.toString() === userId) {\n                  found = true;\n                  cache.del(\"auth_\" + tokenSupplied);\n                  res.status(204).send();\n                }\n              }\n              if (found === false) {\n                res.status(401).send({\n                  \"error\": \"Unauthorized\"\n                });\n              }\n            } else {\n              res.status(401).send({\n                \"error\": \"Unauthorized\"\n              });\n            }\n          }\n        });\n      } else {\n        res.status(401).send({\n          \"error\": \"Unauthorized\"\n        });\n      }\n    };\n  }\n}\nconst authContrllr = new AuthController();\nmodule.exports = authContrllr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdXRoQ3RybCIsInJlcXVpcmUiLCJiYXNpY0F1dGgiLCJkYXRhYmFzZSIsImNhY2hlIiwic2hhIiwidXVpZCIsIkF1dGhDb250cm9sbGVyIiwiY29uc3RydWN0b3IiLCJnZXRDb25uZWN0IiwicmVxIiwicmVzIiwiaGVhZGVyIiwiYXV0aENvZGUiLCJzcGxpdCIsImJ5dGVDb2RlIiwidG9CeXRlQXJyYXkiLCJlbWFpbEFuZFBhc3N3b3JkIiwiVGV4dERlY29kZXIiLCJkZWNvZGUiLCJpbmNsdWRlcyIsInN0YXR1cyIsInNlbmQiLCJlbWFpbCIsImhhc2hlZFBhc3N3b3JkIiwidXNlciIsImNvbGxlY3Rpb24iLCJmaW5kIiwidG9BcnJheSIsImVyciIsInJlc3VsdCIsImxlbmd0aCIsInVzZXJSZXN1bHQiLCJ0b2tlbiIsInY0Iiwic2V0IiwiX2lkIiwidG9TdHJpbmciLCJlIiwiY29uc29sZSIsImxvZyIsImdldERpc2Nvbm5lY3QiLCJ0b2tlblN1cHBsaWVkIiwidXNlcklkIiwiZ2V0IiwidXNyIiwiZm91bmQiLCJpIiwiZGVsIiwiYXV0aENvbnRybGxyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL3Jvb3QvQUxYLUJhY2tlbmQvYWx4LWZpbGVzX21hbmFnZXIvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJBdXRoQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBhdXRoQ3RybCA9IHJlcXVpcmUoJy4uL2NvbnRyb2xsZXJzL0F1dGhDb250cm9sbGVyJyk7XG5jb25zdCBiYXNpY0F1dGggPSByZXF1aXJlKCdiYXNlNjQtanMnKTtcbmNvbnN0IGRhdGFiYXNlID0gcmVxdWlyZSgnLi4vdXRpbHMvZGInKTtcbmNvbnN0IGNhY2hlID0gcmVxdWlyZSgnLi4vdXRpbHMvcmVkaXMnKTtcbmNvbnN0IHNoYSA9IHJlcXVpcmUoJ3NoYTEnKTtcbmNvbnN0IHV1aWQgPSByZXF1aXJlKCd1dWlkJyk7XG5jbGFzcyBBdXRoQ29udHJvbGxlcntcbiAgY29uc3RydWN0b3IoKXtcbiAgICB0aGlzLmdldENvbm5lY3QgPSAocmVxLCByZXMpPT57IFxuICAgIGlmIChyZXEuaGVhZGVyKFwiQXV0aG9yaXphdGlvblwiKSl7XG4gICAgICBsZXQgYXV0aENvZGUgPSByZXEuaGVhZGVyKFwiQXV0aG9yaXphdGlvblwiKS5zcGxpdCgnICcpWzFdO1xuICAgICAgdHJ5e1xuICAgICAgICBsZXQgYnl0ZUNvZGUgPSBiYXNpY0F1dGgudG9CeXRlQXJyYXkoYXV0aENvZGUpO1xuICAgICAgICBsZXQgZW1haWxBbmRQYXNzd29yZCA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShieXRlQ29kZSk7XG4gICAgICAgIGlmICghZW1haWxBbmRQYXNzd29yZC5pbmNsdWRlcygnOicpKXtcbiAgICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1wiZXJyb3JcIjpcIlVuYXV0aG9yaXplZFwifSk7XG4gICAgICAgIH1cbiAgICAgICAgZW1haWxBbmRQYXNzd29yZCA9IGVtYWlsQW5kUGFzc3dvcmQuc3BsaXQoJzonKTtcbiAgICAgICAgbGV0IGVtYWlsID0gZW1haWxBbmRQYXNzd29yZFswXTtcbiAgICAgICAgbGV0IGhhc2hlZFBhc3N3b3JkID0gc2hhKGVtYWlsQW5kUGFzc3dvcmRbMV0pO1xuICAgICAgICBsZXQgdXNlciA9IGRhdGFiYXNlLmRhdGFiYXNlLmNvbGxlY3Rpb24oJ3VzZXJzJykuZmluZCh7J2VtYWlsJzogZW1haWwsICdwYXNzd29yZCc6IGhhc2hlZFBhc3N3b3JkfSkudG9BcnJheSgoZXJyLCByZXN1bHQpPT57XG4gICAgICAgICAgaWYgKCFlcnIpe1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGgpe1xuICAgICAgICAgICAgICBsZXQgdXNlclJlc3VsdCA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgICAgbGV0IHRva2VuID0gdXVpZC52NCgpO1xuICAgICAgICAgICAgICBjYWNoZS5zZXQoXCJhdXRoX1wiICsgdG9rZW4sIHVzZXJSZXN1bHQuX2lkLnRvU3RyaW5nKCksIDg2NDAwKVxuICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuc2VuZCh7J3Rva2VuJzogdG9rZW59KTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XCJlcnJvclwiOlwiVW5hdXRob3JpemVkXCJ9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpO1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XCJlcnJvclwiOlwiVW5hdXRob3JpemVkXCJ9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1wiZXJyb3JcIjpcIlVuYXV0aG9yaXplZFwifSk7XG4gICAgfVxuICAgIH1cblxuXG4gICAgdGhpcy5nZXREaXNjb25uZWN0ID0gYXN5bmMgKHJlcSwgcmVzKSA9PntcbiAgICAgIGxldCB0b2tlblN1cHBsaWVkID0gcmVxLmhlYWRlcihcIlgtVG9rZW5cIik7XG4gICAgICBpZiAoIXRva2VuU3VwcGxpZWQpe1xuICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XCJlcnJvclwiOlwiVW5hdXRob3JpemVkXCJ9KVxuICAgICAgfVxuICAgICAgbGV0IHVzZXJJZCA9IGF3YWl0IGNhY2hlLmdldCgnYXV0aF8nICsgdG9rZW5TdXBwbGllZCk7XG4gICAgICBpZiAodXNlcklkKSB7XG4gICAgICAgIGxldCB1c3IgPSBkYXRhYmFzZS5kYXRhYmFzZS5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmQoe30pLnRvQXJyYXkoKGVyciwgcmVzdWx0KT0+e1xuICAgICAgICAgIGlmICghZXJyKXtcbiAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKXtcblx0ICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0W2ldLl9pZC50b1N0cmluZygpID09PSB1c2VySWQpe1xuXHQgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgY2FjaGUuZGVsKFwiYXV0aF9cIiArIHRva2VuU3VwcGxpZWQpO1xuXHRcdCAgcmVzLnN0YXR1cygyMDQpLnNlbmQoKVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoZm91bmQgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMSkuc2VuZCh7XCJlcnJvclwiOlwiVW5hdXRob3JpemVkXCJ9KTtcblx0ICAgICAgfVxuXHQgICAgfWVsc2V7XG4gICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHtcImVycm9yXCI6XCJVbmF1dGhvcml6ZWRcIn0pO1xuXHQgICAgfVxuXHQgIH1cbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZXtcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLnNlbmQoe1wiZXJyb3JcIjpcIlVuYXV0aG9yaXplZFwifSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5jb25zdCBhdXRoQ29udHJsbHIgPSBuZXcgQXV0aENvbnRyb2xsZXIoKVxubW9kdWxlLmV4cG9ydHMgPSBhdXRoQ29udHJsbHI7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsK0JBQStCLENBQUM7QUFDekQsTUFBTUMsU0FBUyxHQUFHRCxPQUFPLENBQUMsV0FBVyxDQUFDO0FBQ3RDLE1BQU1FLFFBQVEsR0FBR0YsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN2QyxNQUFNRyxLQUFLLEdBQUdILE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztBQUN2QyxNQUFNSSxHQUFHLEdBQUdKLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDM0IsTUFBTUssSUFBSSxHQUFHTCxPQUFPLENBQUMsTUFBTSxDQUFDO0FBQzVCLE1BQU1NLGNBQWM7RUFDbEJDLFdBQVdBLENBQUEsRUFBRTtJQUNYLElBQUksQ0FBQ0MsVUFBVSxHQUFHLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxLQUFHO01BQzlCLElBQUlELEdBQUcsQ0FBQ0UsTUFBTSxDQUFDLGVBQWUsQ0FBQyxFQUFDO1FBQzlCLElBQUlDLFFBQVEsR0FBR0gsR0FBRyxDQUFDRSxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUNFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDeEQsSUFBRztVQUNELElBQUlDLFFBQVEsR0FBR2IsU0FBUyxDQUFDYyxXQUFXLENBQUNILFFBQVEsQ0FBQztVQUM5QyxJQUFJSSxnQkFBZ0IsR0FBRyxJQUFJQyxXQUFXLENBQUMsQ0FBQyxDQUFDQyxNQUFNLENBQUNKLFFBQVEsQ0FBQztVQUN6RCxJQUFJLENBQUNFLGdCQUFnQixDQUFDRyxRQUFRLENBQUMsR0FBRyxDQUFDLEVBQUM7WUFDakNULEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7Y0FBQyxPQUFPLEVBQUM7WUFBYyxDQUFDLENBQUM7VUFDakQ7VUFDQUwsZ0JBQWdCLEdBQUdBLGdCQUFnQixDQUFDSCxLQUFLLENBQUMsR0FBRyxDQUFDO1VBQzlDLElBQUlTLEtBQUssR0FBR04sZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1VBQy9CLElBQUlPLGNBQWMsR0FBR25CLEdBQUcsQ0FBQ1ksZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLENBQUM7VUFDN0MsSUFBSVEsSUFBSSxHQUFHdEIsUUFBUSxDQUFDQSxRQUFRLENBQUN1QixVQUFVLENBQUMsT0FBTyxDQUFDLENBQUNDLElBQUksQ0FBQztZQUFDLE9BQU8sRUFBRUosS0FBSztZQUFFLFVBQVUsRUFBRUM7VUFBYyxDQUFDLENBQUMsQ0FBQ0ksT0FBTyxDQUFDLENBQUNDLEdBQUcsRUFBRUMsTUFBTSxLQUFHO1lBQ3pILElBQUksQ0FBQ0QsR0FBRyxFQUFDO2NBQ1AsSUFBSUMsTUFBTSxDQUFDQyxNQUFNLEVBQUM7Z0JBQ2hCLElBQUlDLFVBQVUsR0FBR0YsTUFBTSxDQUFDLENBQUMsQ0FBQztnQkFDMUIsSUFBSUcsS0FBSyxHQUFHM0IsSUFBSSxDQUFDNEIsRUFBRSxDQUFDLENBQUM7Z0JBQ3JCOUIsS0FBSyxDQUFDK0IsR0FBRyxDQUFDLE9BQU8sR0FBR0YsS0FBSyxFQUFFRCxVQUFVLENBQUNJLEdBQUcsQ0FBQ0MsUUFBUSxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUM7Z0JBQzVEMUIsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztrQkFBQyxPQUFPLEVBQUVXO2dCQUFLLENBQUMsQ0FBQztjQUN4QyxDQUFDLE1BQUk7Z0JBQ0h0QixHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO2tCQUFDLE9BQU8sRUFBQztnQkFBYyxDQUFDLENBQUM7Y0FDaEQ7WUFDRjtVQUNGLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQyxPQUFNZ0IsQ0FBQyxFQUFFO1VBQ0xDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRixDQUFDLENBQUM7VUFDbEIzQixHQUFHLENBQUNVLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDO1lBQUMsT0FBTyxFQUFDO1VBQWMsQ0FBQyxDQUFDO1FBQ2hEO01BQ0YsQ0FBQyxNQUFNO1FBQ0xYLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFBQyxPQUFPLEVBQUM7UUFBYyxDQUFDLENBQUM7TUFDaEQ7SUFDQSxDQUFDO0lBR0QsSUFBSSxDQUFDbUIsYUFBYSxHQUFHLE9BQU8vQixHQUFHLEVBQUVDLEdBQUcsS0FBSTtNQUN0QyxJQUFJK0IsYUFBYSxHQUFHaEMsR0FBRyxDQUFDRSxNQUFNLENBQUMsU0FBUyxDQUFDO01BQ3pDLElBQUksQ0FBQzhCLGFBQWEsRUFBQztRQUNqQi9CLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7VUFBQyxPQUFPLEVBQUM7UUFBYyxDQUFDLENBQUM7TUFDaEQ7TUFDQSxJQUFJcUIsTUFBTSxHQUFHLE1BQU12QyxLQUFLLENBQUN3QyxHQUFHLENBQUMsT0FBTyxHQUFHRixhQUFhLENBQUM7TUFDckQsSUFBSUMsTUFBTSxFQUFFO1FBQ1YsSUFBSUUsR0FBRyxHQUFHMUMsUUFBUSxDQUFDQSxRQUFRLENBQUN1QixVQUFVLENBQUMsT0FBTyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxPQUFPLENBQUMsQ0FBQ0MsR0FBRyxFQUFFQyxNQUFNLEtBQUc7VUFDOUUsSUFBSSxDQUFDRCxHQUFHLEVBQUM7WUFDUCxJQUFJQyxNQUFNLENBQUNDLE1BQU0sRUFBQztjQUN2QixJQUFJZSxLQUFLLEdBQUcsS0FBSztjQUNWLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHakIsTUFBTSxDQUFDQyxNQUFNLEVBQUVnQixDQUFDLEVBQUUsRUFBQztnQkFDckMsSUFBSWpCLE1BQU0sQ0FBQ2lCLENBQUMsQ0FBQyxDQUFDWCxHQUFHLENBQUNDLFFBQVEsQ0FBQyxDQUFDLEtBQUtNLE1BQU0sRUFBQztrQkFDN0NHLEtBQUssR0FBRyxJQUFJO2tCQUNMMUMsS0FBSyxDQUFDNEMsR0FBRyxDQUFDLE9BQU8sR0FBR04sYUFBYSxDQUFDO2tCQUNoRC9CLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUMsQ0FBQztnQkFDakI7Y0FDRjtjQUNBLElBQUl3QixLQUFLLEtBQUssS0FBSyxFQUFDO2dCQUNYbkMsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztrQkFBQyxPQUFPLEVBQUM7Z0JBQWMsQ0FBQyxDQUFDO2NBQ3ZEO1lBQ0YsQ0FBQyxNQUFJO2NBQ0lYLEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUM7Z0JBQUMsT0FBTyxFQUFDO2NBQWMsQ0FBQyxDQUFDO1lBQ3ZEO1VBQ0Y7UUFDSyxDQUFDLENBQUM7TUFDSixDQUFDLE1BQUs7UUFDSlgsR0FBRyxDQUFDVSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQztVQUFDLE9BQU8sRUFBQztRQUFjLENBQUMsQ0FBQztNQUNoRDtJQUNGLENBQUM7RUFDSDtBQUNGO0FBQ0EsTUFBTTJCLFlBQVksR0FBRyxJQUFJMUMsY0FBYyxDQUFDLENBQUM7QUFDekMyQyxNQUFNLENBQUNDLE9BQU8sR0FBR0YsWUFBWSJ9","map":{"version":3,"names":["authCtrl","require","basicAuth","database","cache","sha","uuid","AuthController","constructor","getConnect","req","res","header","authCode","split","byteCode","toByteArray","emailAndPassword","TextDecoder","decode","includes","status","send","email","hashedPassword","user","collection","find","toArray","err","result","length","userResult","token","v4","set","_id","toString","e","console","log","getDisconnect","tokenSupplied","userId","get","usr","found","i","del","authContrllr","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/controllers/","sources":["AuthController.js"],"sourcesContent":["const authCtrl = require('../controllers/AuthController');\nconst basicAuth = require('base64-js');\nconst database = require('../utils/db');\nconst cache = require('../utils/redis');\nconst sha = require('sha1');\nconst uuid = require('uuid');\nclass AuthController{\n  constructor(){\n    this.getConnect = (req, res)=>{ \n    if (req.header(\"Authorization\")){\n      let authCode = req.header(\"Authorization\").split(' ')[1];\n      try{\n        let byteCode = basicAuth.toByteArray(authCode);\n        let emailAndPassword = new TextDecoder().decode(byteCode);\n        if (!emailAndPassword.includes(':')){\n           res.status(401).send({\"error\":\"Unauthorized\"});\n        }\n        emailAndPassword = emailAndPassword.split(':');\n        let email = emailAndPassword[0];\n        let hashedPassword = sha(emailAndPassword[1]);\n        let user = database.database.collection('users').find({'email': email, 'password': hashedPassword}).toArray((err, result)=>{\n          if (!err){\n            if (result.length){\n              let userResult = result[0];\n              let token = uuid.v4();\n              cache.set(\"auth_\" + token, userResult._id.toString(), 86400)\n              res.status(200).send({'token': token});\n            }else{\n              res.status(401).send({\"error\":\"Unauthorized\"});\n            }\n          }\n        })\n      } catch(e) {\n            console.log(e);\n        res.status(401).send({\"error\":\"Unauthorized\"});\n      }\n    } else {\n      res.status(401).send({\"error\":\"Unauthorized\"});\n    }\n    }\n\n\n    this.getDisconnect = async (req, res) =>{\n      let tokenSupplied = req.header(\"X-Token\");\n      if (!tokenSupplied){\n        res.status(401).send({\"error\":\"Unauthorized\"})\n      }\n      let userId = await cache.get('auth_' + tokenSupplied);\n      if (userId) {\n        let usr = database.database.collection('users').find({}).toArray((err, result)=>{\n          if (!err){\n            if (result.length){\n\t      let found = false;\n              for (let i = 0; i < result.length; i++){\n                if (result[i]._id.toString() === userId){\n\t          found = true;\n                  cache.del(\"auth_\" + tokenSupplied);\n\t\t  res.status(204).send()\n\t        }\n\t      }\n\t      if (found === false){\n                res.status(401).send({\"error\":\"Unauthorized\"});\n\t      }\n\t    }else{\n              res.status(401).send({\"error\":\"Unauthorized\"});\n\t    }\n\t  }\n        })\n      } else{\n        res.status(401).send({\"error\":\"Unauthorized\"});\n      }\n    }\n  }\n}\nconst authContrllr = new AuthController()\nmodule.exports = authContrllr;\n"],"mappings":"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"}},"mtime":1709012122007},"{\"assumptions\":{},\"sourceRoot\":\"/root/ALX-Backend/alx-files_manager/controllers/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/root/ALX-Backend/alx-files_manager\",\"filename\":\"/root/ALX-Backend/alx-files_manager/controllers/FilesController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/root/ALX-Backend/alx-files_manager\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-top-level-await\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-import-meta\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.23.5:development":{"value":{"code":"\"use strict\";\n\nconst file = require('fs');\nconst {\n  env\n} = require('process');\nconst {\n  v4\n} = require('uuid');\nconst base = require('base64-js');\nconst cache = require('../utils/redis');\nconst db = require('../utils/db');\nclass FilesController {\n  constructor() {}\n  async postUpload(req, res) {\n    const token = req.header('X-Token');\n    if (token) {\n      console.log('token exissts');\n      const userIdInCache = await cache.get(`auth_${token}`);\n      console.log(userIdInCache);\n      db.database.collection('users').find({}).toArray((err, result) => {\n        let userId;\n        let foundUser = false;\n        if (result.length > 0) {\n          for (let i = 0; i < result.length; i++) {\n            if (result[i]._id.toString() === userIdInCache) {\n              userId = result[i]._id;\n              foundUser = true;\n            }\n          }\n          if (foundUser) {\n            req.on('data', dat => {\n              const data = JSON.parse(dat);\n              if (data.name) {\n                if (data.parentId) {\n                  db.database.collection('files').find({}).toArray((err, result) => {\n                    let parentFileId = null;\n                    let foundParent = false;\n                    let parentAFolder = false;\n                    for (let i = 0; i < result.length; i++) {\n                      if (result[i]._id.toString() === data.parentId) {\n                        foundParent = true;\n                        if (result[i].type === 'folder') {\n                          parentFileId = result[i]._id;\n                          parentAFolder = true;\n                        }\n                      }\n                    }\n                    if (foundParent) {\n                      if (parentAFolder) {\n                        if (data.type === 'file' || data.type === 'folder' || data.type === 'image') {\n                          const path = env.FOLDER_PATH ? env.FOLDER_PATH : '/tmp/files_manager';\n                          if (data.type === 'file') {\n                            if (data.data) {\n                              const decryptedData = new TextDecoder().decode(base.toByteArray(data.data));\n                              file.exists(path, err => {\n                                if (err) {\n                                  console.log('the provided folder exists');\n                                  data.userId = userId;\n                                  data.parentId = parentFileId;\n                                  if (data.isPublic === undefined) {\n                                    data.isPublic = false;\n                                  }\n                                  file.writeFile(`${path}/${v4().toString()}`, decryptedData, err => {\n                                    console.log('create adn write to the file');\n                                    db.database.collection('files').insertOne(data, (err, result) => {\n                                      if (err === null) {\n                                        console.log('inerted the doc successfully');\n                                        const object = {};\n                                        object.id = result.ops[0]._id;\n                                        object.userId = result.ops[0].userId.toString();\n                                        object.type = result.ops[0].type;\n                                        object.name = result.ops[0].name;\n                                        object.isPublic = result.ops[0].isPublic;\n                                        object.parentId = result.ops[0].parentId.toString();\n                                        res.status(201).send(object);\n                                      } else {\n                                        res.status(201).send({\n                                          error: 'Error adding to the database'\n                                        });\n                                      }\n                                    });\n                                  });\n                                } else {\n                                  file.mkdir(path, {\n                                    recurssive: true\n                                  }, err => {\n                                    console.log('provided folder does not exist');\n                                    if (err === null) {\n                                      console.log('provided folder created successfull');\n                                      file.writeFile(`${path}/${v4().toString()}`, decryptedData, err => {\n                                        console.log('create adn write to the file');\n                                        if (err === null) {\n                                          data.userId = userId;\n                                          data.parentId = parentFile._id;\n                                          if (data.isPublic === undefined) {\n                                            data.isPublic = false;\n                                          }\n                                          db.database.collection('files').insertOne(data, (err, result) => {\n                                            console.log('inserting to the collection');\n                                            if (err === null) {\n                                              const object = {};\n                                              object.id = result.ops[0]._id;\n                                              object.userId = result.ops[0].userId.toString();\n                                              object.type = result.ops[0].type;\n                                              object.isPublic = result.ops[0].isPublic;\n                                              object.parentId = result.ops[0].parentId.toString();\n                                              object.name = result.ops[0].name;\n                                              res.status(201).send(object);\n                                            } else {\n                                              res.status(201).send({\n                                                error: 'Error adding to db'\n                                              });\n                                            }\n                                          });\n                                        }\n                                      });\n                                    } else {\n                                      // code for when the folder could not be created\n                                      res.status(400).send({\n                                        error: 'file/folder error'\n                                      });\n                                    }\n                                  });\n                                }\n                              });\n                            } else {\n                              // data missing\n                              res.status(400).send({\n                                error: 'Missing data'\n                              });\n                            }\n                          }\n                          if (data.type === 'folder') {\n                            file.exists(`${path}/${data.name}`, err => {\n                              if (err) {\n                                console.log('the provided folder exists');\n                                data.userId = userId;\n                                data.parentId = parentFile._id;\n                                if (data.isPublic === undefined) {\n                                  data.isPublic = false;\n                                }\n                                db.database.collection('files').insertOne(data, (err, result) => {\n                                  if (err === null) {\n                                    const object = {};\n                                    object.id = result.ops[0]._id;\n                                    object.userId = result.ops[0].userId.toString();\n                                    object.name = result.ops[0].name;\n                                    object.type = result.ops[0].type;\n                                    object.isPublic = result.ops[0].isPublic;\n                                    object.parentId = result.ops[0].parentId.toString();\n                                    res.status(201).send(object);\n                                  } else {\n                                    // insertion error\n                                  }\n                                });\n                              } else {\n                                file.mkdir(path, {\n                                  recurssive: true\n                                }, err => {\n                                  console.log('provided folder does not exist');\n                                  if (err === null) {\n                                    console.log('provided folder created successfull');\n                                    data.userId = userId;\n                                    data.parentId = parentFile._id;\n                                    if (data.isPublic === undefined) {\n                                      data.isPublic = false;\n                                    }\n                                    db.database.collection('files').insertOne(data, (err, result) => {\n                                      if (err === null) {\n                                        const object = {};\n                                        object.id = result.ops[0]._id;\n                                        object.userId = result.ops[0].userId.toString();\n                                        object.type = result.ops[0].type;\n                                        object.name = result.ops[0].name;\n                                        object.isPublic = result.ops[0].isPublic;\n                                        object.parentId = result.ops[0].parentId.toString();\n                                        res.status(201).send(object);\n                                      } else {\n                                        // insertion error\n                                      }\n                                    });\n                                  } else {\n                                    // code for when the folder could not be created\n                                    res.status(400).send({\n                                      error: 'file/folder error'\n                                    });\n                                  }\n                                });\n                              }\n                            });\n                          }\n                          if (data.type === 'image') {\n                            // handle for when type is image and the parentId was set and is valid\n                          }\n                        } else {\n                          // type not valid\n                          res.status(400).send({\n                            error: 'Missing type'\n                          });\n                        }\n                      } else {\n                        // parentNot a folder\n                        res.status(400).send({\n                          error: 'Parent is not a folder'\n                        });\n                      }\n                    } else {\n                      // parent not found\n                      res.status(400).send({\n                        error: 'Parent not found'\n                      });\n                    }\n                  });\n                } else {\n                  // parentId was not set. implement for the different types  and make parentId to be 0\n                  if (data.type === 'file' || data.type === 'folder' || data.type === 'image') {\n                    const path = env.FOLDER_PATH ? env.FOLDER_PATH : '/tmp/files_manager';\n                    if (data.type === 'file') {\n                      if (data.data) {\n                        const decryptedData = new TextDecoder().decode(base.toByteArray(data.data));\n                        file.exists(path, err => {\n                          if (err) {\n                            console.log('the provided folder exists');\n                            data.userId = userId;\n                            if (data.isPublic === undefined) {\n                              data.isPublic = false;\n                            }\n                            file.writeFile(`${path}/${v4().toString()}`, decryptedData, err => {\n                              console.log('create adn write to the file');\n                              db.database.collection('files').insertOne(data, (err, result) => {\n                                if (err === null) {\n                                  console.log('inerted the doc successfully');\n                                  const object = {};\n                                  object.id = result.ops[0]._id;\n                                  console.log(result.ops[0]);\n                                  object.userId = result.ops[0].userId.toString();\n                                  object.name = result.ops[0].name;\n                                  object.type = result.ops[0].type;\n                                  object.isPublic = result.ops[0].isPublic;\n                                  object.parentId = 0;\n                                  res.status(201).send(object);\n                                } else {\n                                  res.status(201).send({\n                                    error: 'Error adding to the database'\n                                  });\n                                }\n                              });\n                            });\n                          } else {\n                            file.mkdir(path, {\n                              recurssive: true\n                            }, err => {\n                              console.log('provided folder does not exist');\n                              if (err === null) {\n                                console.log('provided folder created successfull');\n                                file.writeFile(`${path}/${v4().toString()}`, decryptedData, err => {\n                                  console.log('create adn write to the file');\n                                  if (err === null) {\n                                    data.userId = userId;\n                                    if (data.isPublic === undefined) {\n                                      data.isPublic = false;\n                                    }\n                                    db.database.collection('files').insertOne(data, (err, result) => {\n                                      console.log('inserting to the collection');\n                                      if (err === null) {\n                                        const object = {};\n                                        object.id = result.ops[0]._id;\n                                        console.log(result.ops[0]);\n                                        object.userId = result.ops[0].userId.toString();\n                                        object.type = result.ops[0].type;\n                                        object.name = result.ops[0].name;\n                                        object.isPublic = result.ops[0].isPublic;\n                                        object.parentId = 0;\n                                        res.status(201).send(object);\n                                      } else {\n                                        res.status(201).send({\n                                          error: 'Error adding to db'\n                                        });\n                                      }\n                                    });\n                                  }\n                                });\n                              } else {\n                                // code for when the folder could not be created\n                                res.status(400).send({\n                                  error: 'file/folder error'\n                                });\n                              }\n                            });\n                          }\n                        });\n                      } else {\n                        // data missing\n                        res.status(400).send({\n                          error: \"Missing data\"\n                        });\n                      }\n                    }\n                    if (data.type === 'folder') {\n                      file.exists(`${path}/${data.name}`, err => {\n                        if (err) {\n                          console.log('the provided folder exists');\n                          data.userId = userId;\n                          data.parentId = 0;\n                          if (data.isPublic === undefined) {\n                            data.isPublic = false;\n                          }\n                          db.database.collection('files').insertOne(data, (err, result) => {\n                            if (err === null) {\n                              const object = {};\n                              object.id = result.ops[0]._id;\n                              object.userId = result.ops[0].userId.toString();\n                              object.name = result.ops[0].name;\n                              object.type = result.ops[0].type;\n                              object.isPublic = result.ops[0].isPublic;\n                              object.parentId = result.ops[0].parentId.toString();\n                              res.status(201).send(object);\n                            } else {\n                              // insertion error\n                            }\n                          });\n                        } else {\n                          file.mkdir(`${path}/${data.name}`, {\n                            recurssive: true\n                          }, err => {\n                            console.log('provided folder does not exist');\n                            if (err === null) {\n                              console.log('provided folder created successfull');\n                              data.userId = userId;\n                              data.parentId = 0;\n                              if (data.isPublic === undefined) {\n                                data.isPublic = false;\n                              }\n                              db.database.collection('files').insertOne(data, (err, result) => {\n                                if (err === null) {\n                                  const object = {};\n                                  object.id = result.ops[0]._id;\n                                  object.userId = result.ops[0].userId.toString();\n                                  object.name = result.ops[0].name;\n                                  object.type = result.ops[0].type;\n                                  object.isPublic = result.ops[0].isPublic;\n                                  object.parentId = result.ops[0].parentId.toString();\n                                  res.status(201).send(object);\n                                } else {\n                                  // insertion error\n                                }\n                              });\n                            } else {\n                              // code for when the folder could not be created\n                              console.log(err);\n                              res.status(400).send({\n                                error: 'file/folder error'\n                              });\n                            }\n                          });\n                        }\n                      });\n                    }\n                    if (data.type === 'image') {\n                      // handle when the type is image and the parentId was not set\n                    }\n                  } else {\n                    // type is not valid\n                    res.status(400).send({\n                      error: 'Missing type'\n                    });\n                  }\n                }\n              } else {\n                // name doesn not exists\n                res.status(400).send({\n                  error: 'Missing name'\n                });\n              }\n            });\n          } else {\n            // when the login user could not be found in the db\n            res.status(401).send({\n              error: 'Unauthorized'\n            });\n          }\n        } else {\n          // no users\n          res.status(401).send({\n            error: 'Unauthorized'\n          });\n        }\n      });\n    } else {\n      // unauthorized\n      res.status(401).send({\n        error: 'Unauthorized'\n      });\n    }\n  }\n}\nconst fileCtrlr = new FilesController();\nmodule.exports = fileCtrlr;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJmaWxlIiwicmVxdWlyZSIsImVudiIsInY0IiwiYmFzZSIsImNhY2hlIiwiZGIiLCJGaWxlc0NvbnRyb2xsZXIiLCJjb25zdHJ1Y3RvciIsInBvc3RVcGxvYWQiLCJyZXEiLCJyZXMiLCJ0b2tlbiIsImhlYWRlciIsImNvbnNvbGUiLCJsb2ciLCJ1c2VySWRJbkNhY2hlIiwiZ2V0IiwiZGF0YWJhc2UiLCJjb2xsZWN0aW9uIiwiZmluZCIsInRvQXJyYXkiLCJlcnIiLCJyZXN1bHQiLCJ1c2VySWQiLCJmb3VuZFVzZXIiLCJsZW5ndGgiLCJpIiwiX2lkIiwidG9TdHJpbmciLCJvbiIsImRhdCIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJuYW1lIiwicGFyZW50SWQiLCJwYXJlbnRGaWxlSWQiLCJmb3VuZFBhcmVudCIsInBhcmVudEFGb2xkZXIiLCJ0eXBlIiwicGF0aCIsIkZPTERFUl9QQVRIIiwiZGVjcnlwdGVkRGF0YSIsIlRleHREZWNvZGVyIiwiZGVjb2RlIiwidG9CeXRlQXJyYXkiLCJleGlzdHMiLCJpc1B1YmxpYyIsInVuZGVmaW5lZCIsIndyaXRlRmlsZSIsImluc2VydE9uZSIsIm9iamVjdCIsImlkIiwib3BzIiwic3RhdHVzIiwic2VuZCIsImVycm9yIiwibWtkaXIiLCJyZWN1cnNzaXZlIiwicGFyZW50RmlsZSIsImZpbGVDdHJsciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9yb290L0FMWC1CYWNrZW5kL2FseC1maWxlc19tYW5hZ2VyL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiRmlsZXNDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGZpbGUgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgeyBlbnYgfSA9IHJlcXVpcmUoJ3Byb2Nlc3MnKTtcbmNvbnN0IHsgdjQgfSA9IHJlcXVpcmUoJ3V1aWQnKTtcbmNvbnN0IGJhc2UgPSByZXF1aXJlKCdiYXNlNjQtanMnKTtcbmNvbnN0IGNhY2hlID0gcmVxdWlyZSgnLi4vdXRpbHMvcmVkaXMnKTtcbmNvbnN0IGRiID0gcmVxdWlyZSgnLi4vdXRpbHMvZGInKTtcblxuY2xhc3MgRmlsZXNDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG5cbiAgfVxuXG4gIGFzeW5jIHBvc3RVcGxvYWQocmVxLCByZXMpIHtcbiAgXHQgICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVyKCdYLVRva2VuJyk7XG4gICAgaWYgKHRva2VuKSB7XG5cdCAgICBjb25zb2xlLmxvZygndG9rZW4gZXhpc3N0cycpO1xuICAgICAgY29uc3QgdXNlcklkSW5DYWNoZSA9IGF3YWl0IGNhY2hlLmdldChgYXV0aF8ke3Rva2VufWApO1xuXHQgICAgY29uc29sZS5sb2codXNlcklkSW5DYWNoZSk7XG4gICAgICBkYi5kYXRhYmFzZS5jb2xsZWN0aW9uKCd1c2VycycpLmZpbmQoe30pLnRvQXJyYXkoKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICBcdGxldCB1c2VySWQ7XG4gICAgICBcdGxldCBmb3VuZFVzZXIgPSBmYWxzZTtcbiAgICAgIFx0aWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICBcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcbiAgICAgIFx0XHRcdGlmIChyZXN1bHRbaV0uX2lkLnRvU3RyaW5nKCkgPT09IHVzZXJJZEluQ2FjaGUpIHtcbiAgICAgIFx0XHRcdFx0dXNlcklkID0gcmVzdWx0W2ldLl9pZDtcbiAgICAgIFx0XHRcdFx0Zm91bmRVc2VyID0gdHJ1ZTtcbiAgICAgIFx0XHRcdH1cbiAgICAgIFx0XHR9XG4gICAgICBcdFx0aWYgKGZvdW5kVXNlcikge1xuICAgICAgXHRcdFx0cmVxLm9uKCdkYXRhJywgKGRhdCkgPT4ge1xuICAgICAgXHRcdFx0XHRjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXQpO1xuICAgICAgXHRcdFx0XHRpZiAoZGF0YS5uYW1lKSB7XG4gICAgICBcdFx0XHRcdFx0aWYgKGRhdGEucGFyZW50SWQpIHtcbiAgICAgIFx0XHRcdFx0XHRcdGRiLmRhdGFiYXNlLmNvbGxlY3Rpb24oJ2ZpbGVzJykuZmluZCh7fSkudG9BcnJheSgoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0bGV0IHBhcmVudEZpbGVJZCA9IG51bGw7XG4gICAgICBcdFx0XHRcdFx0XHRcdGxldCBmb3VuZFBhcmVudCA9IGZhbHNlO1xuICAgICAgXHRcdFx0XHRcdFx0XHRsZXQgcGFyZW50QUZvbGRlciA9IGZhbHNlO1xuICAgICAgXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdC5sZW5ndGg7IGkrKykge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdGlmIChyZXN1bHRbaV0uX2lkLnRvU3RyaW5nKCkgPT09IGRhdGEucGFyZW50SWQpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdGZvdW5kUGFyZW50ID0gdHJ1ZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdGlmIChyZXN1bHRbaV0udHlwZSA9PT0gJ2ZvbGRlcicpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdCAgcGFyZW50RmlsZUlkID0gcmVzdWx0W2ldLl9pZDtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdCAgcGFyZW50QUZvbGRlciA9IHRydWU7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdGlmIChmb3VuZFBhcmVudCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdGlmIChwYXJlbnRBRm9sZGVyKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YS50eXBlID09PSAnZmlsZScgfHwgZGF0YS50eXBlID09PSAnZm9sZGVyJyB8fCBkYXRhLnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGF0aCA9IGVudi5GT0xERVJfUEFUSCA/IGVudi5GT0xERVJfUEFUSCA6ICcvdG1wL2ZpbGVzX21hbmFnZXInO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YS50eXBlID09PSAnZmlsZScpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YS5kYXRhKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBkZWNyeXB0ZWREYXRhID0gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGJhc2UudG9CeXRlQXJyYXkoZGF0YS5kYXRhKSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmaWxlLmV4aXN0cyhwYXRoLCAoZXJyKSA9PiB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnIpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygndGhlIHByb3ZpZGVkIGZvbGRlciBleGlzdHMnKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLnVzZXJJZCA9IHVzZXJJZDtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLnBhcmVudElkID0gcGFyZW50RmlsZUlkO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChkYXRhLmlzUHVibGljID09PSB1bmRlZmluZWQpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGEuaXNQdWJsaWMgPSBmYWxzZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmlsZS53cml0ZUZpbGUoYCR7cGF0aH0vJHt2NCgpLnRvU3RyaW5nKCl9YCwgZGVjcnlwdGVkRGF0YSwgKGVycikgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2NyZWF0ZSBhZG4gd3JpdGUgdG8gdGhlIGZpbGUnKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRiLmRhdGFiYXNlLmNvbGxlY3Rpb24oJ2ZpbGVzJykuaW5zZXJ0T25lKGRhdGEsIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyID09PSBudWxsKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ2luZXJ0ZWQgdGhlIGRvYyBzdWNjZXNzZnVsbHknKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBvYmplY3QgPSB7fTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QuaWQgPSByZXN1bHQub3BzWzBdLl9pZDtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QudXNlcklkID0gcmVzdWx0Lm9wc1swXS51c2VySWQudG9TdHJpbmcoKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QudHlwZSA9IHJlc3VsdC5vcHNbMF0udHlwZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QubmFtZSA9IHJlc3VsdC5vcHNbMF0ubmFtZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QuaXNQdWJsaWMgPSByZXN1bHQub3BzWzBdLmlzUHVibGljO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5wYXJlbnRJZCA9IHJlc3VsdC5vcHNbMF0ucGFyZW50SWQudG9TdHJpbmcoKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXMuc3RhdHVzKDIwMSkuc2VuZChvYmplY3QpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlcy5zdGF0dXMoMjAxKS5zZW5kKHsgZXJyb3I6ICdFcnJvciBhZGRpbmcgdG8gdGhlIGRhdGFiYXNlJyB9KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmlsZS5ta2RpcihwYXRoLCB7IHJlY3Vyc3NpdmU6IHRydWUgfSwgKGVycikgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3Byb3ZpZGVkIGZvbGRlciBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVyciA9PT0gbnVsbCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygncHJvdmlkZWQgZm9sZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGwnKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmlsZS53cml0ZUZpbGUoYCR7cGF0aH0vJHt2NCgpLnRvU3RyaW5nKCl9YCwgZGVjcnlwdGVkRGF0YSwgKGVycikgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjcmVhdGUgYWRuIHdyaXRlIHRvIHRoZSBmaWxlJyk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVyciA9PT0gbnVsbCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS51c2VySWQgPSB1c2VySWQ7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLnBhcmVudElkID0gcGFyZW50RmlsZS5faWQ7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YS5pc1B1YmxpYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGEuaXNQdWJsaWMgPSBmYWxzZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRiLmRhdGFiYXNlLmNvbGxlY3Rpb24oJ2ZpbGVzJykuaW5zZXJ0T25lKGRhdGEsIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnaW5zZXJ0aW5nIHRvIHRoZSBjb2xsZWN0aW9uJyk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnIgPT09IG51bGwpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBvYmplY3QgPSB7fTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QuaWQgPSByZXN1bHQub3BzWzBdLl9pZDtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QudXNlcklkID0gcmVzdWx0Lm9wc1swXS51c2VySWQudG9TdHJpbmcoKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QudHlwZSA9IHJlc3VsdC5vcHNbMF0udHlwZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QuaXNQdWJsaWMgPSByZXN1bHQub3BzWzBdLmlzUHVibGljO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5wYXJlbnRJZCA9IHJlc3VsdC5vcHNbMF0ucGFyZW50SWQudG9TdHJpbmcoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QubmFtZSA9IHJlc3VsdC5vcHNbMF0ubmFtZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXMuc3RhdHVzKDIwMSkuc2VuZChvYmplY3QpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlcy5zdGF0dXMoMjAxKS5zZW5kKHsgZXJyb3I6ICdFcnJvciBhZGRpbmcgdG8gZGInIH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29kZSBmb3Igd2hlbiB0aGUgZm9sZGVyIGNvdWxkIG5vdCBiZSBjcmVhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgZXJyb3I6ICdmaWxlL2ZvbGRlciBlcnJvcicgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBkYXRhIG1pc3Npbmdcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgZXJyb3I6ICdNaXNzaW5nIGRhdGEnIH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YS50eXBlID09PSAnZm9sZGVyJykge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGZpbGUuZXhpc3RzKGAke3BhdGh9LyR7ZGF0YS5uYW1lfWAsIChlcnIpID0+IHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnIpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3RoZSBwcm92aWRlZCBmb2xkZXIgZXhpc3RzJyk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGEudXNlcklkID0gdXNlcklkO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLnBhcmVudElkID0gcGFyZW50RmlsZS5faWQ7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChkYXRhLmlzUHVibGljID09PSB1bmRlZmluZWQpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLmlzUHVibGljID0gZmFsc2U7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGIuZGF0YWJhc2UuY29sbGVjdGlvbignZmlsZXMnKS5pbnNlcnRPbmUoZGF0YSwgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVyciA9PT0gbnVsbCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgb2JqZWN0ID0ge307XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QuaWQgPSByZXN1bHQub3BzWzBdLl9pZDtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC51c2VySWQgPSByZXN1bHQub3BzWzBdLnVzZXJJZC50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0Lm5hbWUgPSByZXN1bHQub3BzWzBdLm5hbWU7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QudHlwZSA9IHJlc3VsdC5vcHNbMF0udHlwZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5pc1B1YmxpYyA9IHJlc3VsdC5vcHNbMF0uaXNQdWJsaWM7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QucGFyZW50SWQgPSByZXN1bHQub3BzWzBdLnBhcmVudElkLnRvU3RyaW5nKCk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXMuc3RhdHVzKDIwMSkuc2VuZChvYmplY3QpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpbnNlcnRpb24gZXJyb3JcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmlsZS5ta2RpcihwYXRoLCB7IHJlY3Vyc3NpdmU6IHRydWUgfSwgKGVycikgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdwcm92aWRlZCBmb2xkZXIgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyID09PSBudWxsKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygncHJvdmlkZWQgZm9sZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGwnKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGEudXNlcklkID0gdXNlcklkO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS5wYXJlbnRJZCA9IHBhcmVudEZpbGUuX2lkO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGEuaXNQdWJsaWMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLmlzUHVibGljID0gZmFsc2U7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYi5kYXRhYmFzZS5jb2xsZWN0aW9uKCdmaWxlcycpLmluc2VydE9uZShkYXRhLCAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVyciA9PT0gbnVsbCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IG9iamVjdCA9IHt9O1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5pZCA9IHJlc3VsdC5vcHNbMF0uX2lkO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC51c2VySWQgPSByZXN1bHQub3BzWzBdLnVzZXJJZC50b1N0cmluZygpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC50eXBlID0gcmVzdWx0Lm9wc1swXS50eXBlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5uYW1lID0gcmVzdWx0Lm9wc1swXS5uYW1lO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5pc1B1YmxpYyA9IHJlc3VsdC5vcHNbMF0uaXNQdWJsaWM7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0LnBhcmVudElkID0gcmVzdWx0Lm9wc1swXS5wYXJlbnRJZC50b1N0cmluZygpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlcy5zdGF0dXMoMjAxKS5zZW5kKG9iamVjdCk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpbnNlcnRpb24gZXJyb3JcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29kZSBmb3Igd2hlbiB0aGUgZm9sZGVyIGNvdWxkIG5vdCBiZSBjcmVhdGVkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IGVycm9yOiAnZmlsZS9mb2xkZXIgZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGEudHlwZSA9PT0gJ2ltYWdlJykge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGhhbmRsZSBmb3Igd2hlbiB0eXBlIGlzIGltYWdlIGFuZCB0aGUgcGFyZW50SWQgd2FzIHNldCBhbmQgaXMgdmFsaWRcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gdHlwZSBub3QgdmFsaWRcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzLnN0YXR1cyg0MDApLnNlbmQoeyBlcnJvcjogJ01pc3NpbmcgdHlwZScgfSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdC8vIHBhcmVudE5vdCBhIGZvbGRlclxuXHRcdFx0XHRcdFx0XHRcdFx0cmVzLnN0YXR1cyg0MDApLnNlbmQoeyBlcnJvcjogJ1BhcmVudCBpcyBub3QgYSBmb2xkZXInIH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHQvLyBwYXJlbnQgbm90IGZvdW5kXG5cdFx0XHRcdFx0XHRcdFx0cmVzLnN0YXR1cyg0MDApLnNlbmQoeyBlcnJvcjogJ1BhcmVudCBub3QgZm91bmQnIH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHR9KTtcbiAgICAgIFx0XHRcdFx0XHR9IGVsc2Uge1xuICAgICAgXHRcdFx0XHRcdFx0Ly8gcGFyZW50SWQgd2FzIG5vdCBzZXQuIGltcGxlbWVudCBmb3IgdGhlIGRpZmZlcmVudCB0eXBlcyAgYW5kIG1ha2UgcGFyZW50SWQgdG8gYmUgMFxuICAgICAgXHRcdFx0XHRcdFx0aWYgKGRhdGEudHlwZSA9PT0gJ2ZpbGUnIHx8IGRhdGEudHlwZSA9PT0gJ2ZvbGRlcicgfHwgZGF0YS50eXBlID09PSAnaW1hZ2UnKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdGNvbnN0IHBhdGggPSBlbnYuRk9MREVSX1BBVEggPyBlbnYuRk9MREVSX1BBVEggOiAnL3RtcC9maWxlc19tYW5hZ2VyJztcbiAgICAgIFx0XHRcdFx0XHRcdFx0aWYgKGRhdGEudHlwZSA9PT0gJ2ZpbGUnKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGEuZGF0YSkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgZGVjcnlwdGVkRGF0YSA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShiYXNlLnRvQnl0ZUFycmF5KGRhdGEuZGF0YSkpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0ZmlsZS5leGlzdHMocGF0aCwgKGVycikgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3RoZSBwcm92aWRlZCBmb2xkZXIgZXhpc3RzJyk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS51c2VySWQgPSB1c2VySWQ7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGEuaXNQdWJsaWMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS5pc1B1YmxpYyA9IGZhbHNlO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmaWxlLndyaXRlRmlsZShgJHtwYXRofS8ke3Y0KCkudG9TdHJpbmcoKX1gLCBkZWNyeXB0ZWREYXRhLCAoZXJyKSA9PiB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnY3JlYXRlIGFkbiB3cml0ZSB0byB0aGUgZmlsZScpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGIuZGF0YWJhc2UuY29sbGVjdGlvbignZmlsZXMnKS5pbnNlcnRPbmUoZGF0YSwgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnIgPT09IG51bGwpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnaW5lcnRlZCB0aGUgZG9jIHN1Y2Nlc3NmdWxseScpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IG9iamVjdCA9IHt9O1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5pZCA9IHJlc3VsdC5vcHNbMF0uX2lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5vcHNbMF0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC51c2VySWQgPSByZXN1bHQub3BzWzBdLnVzZXJJZC50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5uYW1lID0gcmVzdWx0Lm9wc1swXS5uYW1lO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC50eXBlID0gcmVzdWx0Lm9wc1swXS50eXBlO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5pc1B1YmxpYyA9IHJlc3VsdC5vcHNbMF0uaXNQdWJsaWM7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0LnBhcmVudElkID0gMDtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXMuc3RhdHVzKDIwMSkuc2VuZChvYmplY3QpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlcy5zdGF0dXMoMjAxKS5zZW5kKHsgZXJyb3I6ICdFcnJvciBhZGRpbmcgdG8gdGhlIGRhdGFiYXNlJyB9KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmlsZS5ta2RpcihwYXRoLCB7IHJlY3Vyc3NpdmU6IHRydWUgfSwgKGVycikgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coJ3Byb3ZpZGVkIGZvbGRlciBkb2VzIG5vdCBleGlzdCcpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVyciA9PT0gbnVsbCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygncHJvdmlkZWQgZm9sZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGwnKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmlsZS53cml0ZUZpbGUoYCR7cGF0aH0vJHt2NCgpLnRvU3RyaW5nKCl9YCwgZGVjcnlwdGVkRGF0YSwgKGVycikgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdjcmVhdGUgYWRuIHdyaXRlIHRvIHRoZSBmaWxlJyk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVyciA9PT0gbnVsbCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS51c2VySWQgPSB1c2VySWQ7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YS5pc1B1YmxpYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGEuaXNQdWJsaWMgPSBmYWxzZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRiLmRhdGFiYXNlLmNvbGxlY3Rpb24oJ2ZpbGVzJykuaW5zZXJ0T25lKGRhdGEsIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygnaW5zZXJ0aW5nIHRvIHRoZSBjb2xsZWN0aW9uJyk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChlcnIgPT09IG51bGwpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBvYmplY3QgPSB7fTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QuaWQgPSByZXN1bHQub3BzWzBdLl9pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQub3BzWzBdKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QudXNlcklkID0gcmVzdWx0Lm9wc1swXS51c2VySWQudG9TdHJpbmcoKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QudHlwZSA9IHJlc3VsdC5vcHNbMF0udHlwZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QubmFtZSA9IHJlc3VsdC5vcHNbMF0ubmFtZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QuaXNQdWJsaWMgPSByZXN1bHQub3BzWzBdLmlzUHVibGljO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5wYXJlbnRJZCA9IDA7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzLnN0YXR1cygyMDEpLnNlbmQob2JqZWN0KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXMuc3RhdHVzKDIwMSkuc2VuZCh7IGVycm9yOiAnRXJyb3IgYWRkaW5nIHRvIGRiJyB9KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvZGUgZm9yIHdoZW4gdGhlIGZvbGRlciBjb3VsZCBub3QgYmUgY3JlYXRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDQwMCkuc2VuZCh7IGVycm9yOiAnZmlsZS9mb2xkZXIgZXJyb3InIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHR9KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gZGF0YSBtaXNzaW5nXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXMuc3RhdHVzKDQwMCkuc2VuZCh7ZXJyb3I6IFwiTWlzc2luZyBkYXRhXCJ9KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGRhdGEudHlwZSA9PT0gJ2ZvbGRlcicpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRmaWxlLmV4aXN0cyhgJHtwYXRofS8ke2RhdGEubmFtZX1gLCAoZXJyKSA9PiB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCd0aGUgcHJvdmlkZWQgZm9sZGVyIGV4aXN0cycpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLnVzZXJJZCA9IHVzZXJJZDtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS5wYXJlbnRJZCA9IDA7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChkYXRhLmlzUHVibGljID09PSB1bmRlZmluZWQpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhLmlzUHVibGljID0gZmFsc2U7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGIuZGF0YWJhc2UuY29sbGVjdGlvbignZmlsZXMnKS5pbnNlcnRPbmUoZGF0YSwgKGVyciwgcmVzdWx0KSA9PiB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGVyciA9PT0gbnVsbCkge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgb2JqZWN0ID0ge307XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QuaWQgPSByZXN1bHQub3BzWzBdLl9pZDtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC51c2VySWQgPSByZXN1bHQub3BzWzBdLnVzZXJJZC50b1N0cmluZygpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0Lm5hbWUgPSByZXN1bHQub3BzWzBdLm5hbWU7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QudHlwZSA9IHJlc3VsdC5vcHNbMF0udHlwZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdG9iamVjdC5pc1B1YmxpYyA9IHJlc3VsdC5vcHNbMF0uaXNQdWJsaWM7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QucGFyZW50SWQgPSByZXN1bHQub3BzWzBdLnBhcmVudElkLnRvU3RyaW5nKCk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXMuc3RhdHVzKDIwMSkuc2VuZChvYmplY3QpO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBpbnNlcnRpb24gZXJyb3JcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZmlsZS5ta2RpcihgJHtwYXRofS8ke2RhdGEubmFtZX1gLCB7IHJlY3Vyc3NpdmU6IHRydWUgfSwgKGVycikgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKCdwcm92aWRlZCBmb2xkZXIgZG9lcyBub3QgZXhpc3QnKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyID09PSBudWxsKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZygncHJvdmlkZWQgZm9sZGVyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGwnKTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGEudXNlcklkID0gdXNlcklkO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YS5wYXJlbnRJZCA9IDA7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YS5pc1B1YmxpYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRhdGEuaXNQdWJsaWMgPSBmYWxzZTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRiLmRhdGFiYXNlLmNvbGxlY3Rpb24oJ2ZpbGVzJykuaW5zZXJ0T25lKGRhdGEsIChlcnIsIHJlc3VsdCkgPT4ge1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoZXJyID09PSBudWxsKSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgb2JqZWN0ID0ge307XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0LmlkID0gcmVzdWx0Lm9wc1swXS5faWQ7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0LnVzZXJJZCA9IHJlc3VsdC5vcHNbMF0udXNlcklkLnRvU3RyaW5nKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0Lm5hbWUgPSByZXN1bHQub3BzWzBdLm5hbWU7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0LnR5cGUgPSByZXN1bHQub3BzWzBdLnR5cGU7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0b2JqZWN0LmlzUHVibGljID0gcmVzdWx0Lm9wc1swXS5pc1B1YmxpYztcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvYmplY3QucGFyZW50SWQgPSByZXN1bHQub3BzWzBdLnBhcmVudElkLnRvU3RyaW5nKCk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzLnN0YXR1cygyMDEpLnNlbmQob2JqZWN0KTtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIGluc2VydGlvbiBlcnJvclxuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvZGUgZm9yIHdoZW4gdGhlIGZvbGRlciBjb3VsZCBub3QgYmUgY3JlYXRlZFxuXHRcdFx0XHRjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MDApLnNlbmQoeyBlcnJvcjogJ2ZpbGUvZm9sZGVyIGVycm9yJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuICAgICAgXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChkYXRhLnR5cGUgPT09ICdpbWFnZScpIHtcbiAgICAgIFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBoYW5kbGUgd2hlbiB0aGUgdHlwZSBpcyBpbWFnZSBhbmQgdGhlIHBhcmVudElkIHdhcyBub3Qgc2V0XG4gICAgICBcdFx0XHRcdFx0XHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0XHRcdH0gZWxzZSB7XG4gICAgICBcdFx0XHRcdFx0XHRcdC8vIHR5cGUgaXMgbm90IHZhbGlkXG5cdFx0XHRcdFx0XHRcdHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgZXJyb3I6ICdNaXNzaW5nIHR5cGUnIH0pO1xuICAgICAgXHRcdFx0XHRcdFx0fVxuICAgICAgXHRcdFx0XHRcdH1cbiAgICAgIFx0XHRcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdFx0XHQvLyBuYW1lIGRvZXNuIG5vdCBleGlzdHNcblx0XHRcdFx0XHRyZXMuc3RhdHVzKDQwMCkuc2VuZCh7IGVycm9yOiAnTWlzc2luZyBuYW1lJyB9KTtcbiAgICAgIFx0XHRcdFx0fVxuICAgICAgXHRcdFx0fSk7XG4gICAgICBcdFx0fSBlbHNlIHtcbiAgICAgIFx0XHRcdC8vIHdoZW4gdGhlIGxvZ2luIHVzZXIgY291bGQgbm90IGJlIGZvdW5kIGluIHRoZSBkYlxuXHRcdFx0cmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICBcdFx0fVxuICAgICAgXHR9IGVsc2Uge1xuICAgICAgXHRcdC8vIG5vIHVzZXJzXG5cdFx0cmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBlcnJvcjogJ1VuYXV0aG9yaXplZCcgfSk7XG4gICAgICBcdH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgXHQvLyB1bmF1dGhvcml6ZWRcblx0ICAgIHJlcy5zdGF0dXMoNDAxKS5zZW5kKHsgZXJyb3I6ICdVbmF1dGhvcml6ZWQnIH0pO1xuICAgIH1cbiAgfVxufVxuY29uc3QgZmlsZUN0cmxyID0gbmV3IEZpbGVzQ29udHJvbGxlcigpO1xubW9kdWxlLmV4cG9ydHMgPSBmaWxlQ3RybHI7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsTUFBTUEsSUFBSSxHQUFHQyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQzFCLE1BQU07RUFBRUM7QUFBSSxDQUFDLEdBQUdELE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsTUFBTTtFQUFFRTtBQUFHLENBQUMsR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM5QixNQUFNRyxJQUFJLEdBQUdILE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDakMsTUFBTUksS0FBSyxHQUFHSixPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDdkMsTUFBTUssRUFBRSxHQUFHTCxPQUFPLENBQUMsYUFBYSxDQUFDO0FBRWpDLE1BQU1NLGVBQWUsQ0FBQztFQUNwQkMsV0FBV0EsQ0FBQSxFQUFHLENBRWQ7RUFFQSxNQUFNQyxVQUFVQSxDQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUN0QixNQUFNQyxLQUFLLEdBQUdGLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLFNBQVMsQ0FBQztJQUN0QyxJQUFJRCxLQUFLLEVBQUU7TUFDVkUsT0FBTyxDQUFDQyxHQUFHLENBQUMsZUFBZSxDQUFDO01BQzNCLE1BQU1DLGFBQWEsR0FBRyxNQUFNWCxLQUFLLENBQUNZLEdBQUcsQ0FBRSxRQUFPTCxLQUFNLEVBQUMsQ0FBQztNQUN2REUsT0FBTyxDQUFDQyxHQUFHLENBQUNDLGFBQWEsQ0FBQztNQUN6QlYsRUFBRSxDQUFDWSxRQUFRLENBQUNDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUNDLE9BQU8sQ0FBQyxDQUFDQyxHQUFHLEVBQUVDLE1BQU0sS0FBSztRQUNqRSxJQUFJQyxNQUFNO1FBQ1YsSUFBSUMsU0FBUyxHQUFHLEtBQUs7UUFDckIsSUFBSUYsTUFBTSxDQUFDRyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1VBQ3RC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","map":{"version":3,"names":["file","require","env","v4","base","cache","db","FilesController","constructor","postUpload","req","res","token","header","console","log","userIdInCache","get","database","collection","find","toArray","err","result","userId","foundUser","length","i","_id","toString","on","dat","data","JSON","parse","name","parentId","parentFileId","foundParent","parentAFolder","type","path","FOLDER_PATH","decryptedData","TextDecoder","decode","toByteArray","exists","isPublic","undefined","writeFile","insertOne","object","id","ops","status","send","error","mkdir","recurssive","parentFile","fileCtrlr","module","exports"],"sourceRoot":"/root/ALX-Backend/alx-files_manager/controllers/","sources":["FilesController.js"],"sourcesContent":["const file = require('fs');\nconst { env } = require('process');\nconst { v4 } = require('uuid');\nconst base = require('base64-js');\nconst cache = require('../utils/redis');\nconst db = require('../utils/db');\n\nclass FilesController {\n  constructor() {\n\n  }\n\n  async postUpload(req, res) {\n  \t    const token = req.header('X-Token');\n    if (token) {\n\t    console.log('token exissts');\n      const userIdInCache = await cache.get(`auth_${token}`);\n\t    console.log(userIdInCache);\n      db.database.collection('users').find({}).toArray((err, result) => {\n      \tlet userId;\n      \tlet foundUser = false;\n      \tif (result.length > 0) {\n      \t\tfor (let i = 0; i < result.length; i++) {\n      \t\t\tif (result[i]._id.toString() === userIdInCache) {\n      \t\t\t\tuserId = result[i]._id;\n      \t\t\t\tfoundUser = true;\n      \t\t\t}\n      \t\t}\n      \t\tif (foundUser) {\n      \t\t\treq.on('data', (dat) => {\n      \t\t\t\tconst data = JSON.parse(dat);\n      \t\t\t\tif (data.name) {\n      \t\t\t\t\tif (data.parentId) {\n      \t\t\t\t\t\tdb.database.collection('files').find({}).toArray((err, result) => {\n      \t\t\t\t\t\t\tlet parentFileId = null;\n      \t\t\t\t\t\t\tlet foundParent = false;\n      \t\t\t\t\t\t\tlet parentAFolder = false;\n      \t\t\t\t\t\t\tfor (let i = 0; i < result.length; i++) {\n      \t\t\t\t\t\t\t\tif (result[i]._id.toString() === data.parentId) {\n      \t\t\t\t\t\t\t\t\tfoundParent = true;\n      \t\t\t\t\t\t\t\t\tif (result[i].type === 'folder') {\n      \t\t\t\t\t\t\t\t\t  parentFileId = result[i]._id;\n      \t\t\t\t\t\t\t\t\t  parentAFolder = true;\n      \t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\tif (foundParent) {\n      \t\t\t\t\t\t\t\tif (parentAFolder) {\n      \t\t\t\t\t\t\t\t\tif (data.type === 'file' || data.type === 'folder' || data.type === 'image') {\n      \t\t\t\t\t\t\t\t\t\tconst path = env.FOLDER_PATH ? env.FOLDER_PATH : '/tmp/files_manager';\n      \t\t\t\t\t\t\t\t\t\tif (data.type === 'file') {\n      \t\t\t\t\t\t\t\t\t\t\tif (data.data) {\n      \t\t\t\t\t\t\t\t\t\t\t\tconst decryptedData = new TextDecoder().decode(base.toByteArray(data.data));\n      \t\t\t\t\t\t\t\t\t\t\t\tfile.exists(path, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\tif (err) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('the provided folder exists');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.userId = userId;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.parentId = parentFileId;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data.isPublic === undefined) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.isPublic = false;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tfile.writeFile(`${path}/${v4().toString()}`, decryptedData, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('create adn write to the file');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdb.database.collection('files').insertOne(data, (err, result) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('inerted the doc successfully');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst object = {};\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.id = result.ops[0]._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.userId = result.ops[0].userId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.type = result.ops[0].type;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.name = result.ops[0].name;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.isPublic = result.ops[0].isPublic;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.parentId = result.ops[0].parentId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send(object);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send({ error: 'Error adding to the database' });\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tfile.mkdir(path, { recurssive: true }, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('provided folder does not exist');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('provided folder created successfull');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfile.writeFile(`${path}/${v4().toString()}`, decryptedData, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('create adn write to the file');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.userId = userId;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.parentId = parentFile._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data.isPublic === undefined) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.isPublic = false;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdb.database.collection('files').insertOne(data, (err, result) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('inserting to the collection');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst object = {};\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.id = result.ops[0]._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.userId = result.ops[0].userId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.type = result.ops[0].type;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.isPublic = result.ops[0].isPublic;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.parentId = result.ops[0].parentId.toString();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.name = result.ops[0].name;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send(object);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send({ error: 'Error adding to db' });\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n                                      // code for when the folder could not be created\n                                      res.status(400).send({ error: 'file/folder error' });\n                                    }\n                                  });\n      \t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t// data missing\n\t\t\t\t\t\t\t\t\t\t\t\tres.status(400).send({ error: 'Missing data' });\n      \t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\tif (data.type === 'folder') {\n      \t\t\t\t\t\t\t\t\t\t\tfile.exists(`${path}/${data.name}`, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\tif (err) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('the provided folder exists');\n      \t\t\t\t\t\t\t\t\t\t\t\t\tdata.userId = userId;\n      \t\t\t\t\t\t\t\t\t\t\t\t\tdata.parentId = parentFile._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\tif (data.isPublic === undefined) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.isPublic = false;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\tdb.database.collection('files').insertOne(data, (err, result) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst object = {};\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.id = result.ops[0]._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.userId = result.ops[0].userId.toString();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.name = result.ops[0].name;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.type = result.ops[0].type;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.isPublic = result.ops[0].isPublic;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.parentId = result.ops[0].parentId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send(object);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// insertion error\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\tfile.mkdir(path, { recurssive: true }, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('provided folder does not exist');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('provided folder created successfull');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.userId = userId;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.parentId = parentFile._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data.isPublic === undefined) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.isPublic = false;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdb.database.collection('files').insertOne(data, (err, result) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst object = {};\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.id = result.ops[0]._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.userId = result.ops[0].userId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.type = result.ops[0].type;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.name = result.ops[0].name;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.isPublic = result.ops[0].isPublic;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.parentId = result.ops[0].parentId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send(object);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// insertion error\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n                                  // code for when the folder could not be created\n                                    res.status(400).send({ error: 'file/folder error' });\n                                  }\n                                });\n      \t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\tif (data.type === 'image') {\n      \t\t\t\t\t\t\t\t\t\t\t// handle for when type is image and the parentId was set and is valid\n      \t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t// type not valid\n\t\t\t\t\t\t\t\t\t\tres.status(400).send({ error: 'Missing type' });\n      \t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t// parentNot a folder\n\t\t\t\t\t\t\t\t\tres.status(400).send({ error: 'Parent is not a folder' });\n      \t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t// parent not found\n\t\t\t\t\t\t\t\tres.status(400).send({ error: 'Parent not found' });\n      \t\t\t\t\t\t\t}\n      \t\t\t\t\t\t});\n      \t\t\t\t\t} else {\n      \t\t\t\t\t\t// parentId was not set. implement for the different types  and make parentId to be 0\n      \t\t\t\t\t\tif (data.type === 'file' || data.type === 'folder' || data.type === 'image') {\n      \t\t\t\t\t\t\tconst path = env.FOLDER_PATH ? env.FOLDER_PATH : '/tmp/files_manager';\n      \t\t\t\t\t\t\tif (data.type === 'file') {\n      \t\t\t\t\t\t\t\tif (data.data) {\n      \t\t\t\t\t\t\t\t\tconst decryptedData = new TextDecoder().decode(base.toByteArray(data.data));\n      \t\t\t\t\t\t\t\t\tfile.exists(path, (err) => {\n      \t\t\t\t\t\t\t\t\t\tif (err) {\n      \t\t\t\t\t\t\t\t\t\t\tconsole.log('the provided folder exists');\n      \t\t\t\t\t\t\t\t\t\t\tdata.userId = userId;\n      \t\t\t\t\t\t\t\t\t\t\tif (data.isPublic === undefined) {\n      \t\t\t\t\t\t\t\t\t\t\t\tdata.isPublic = false;\n      \t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\tfile.writeFile(`${path}/${v4().toString()}`, decryptedData, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\tconsole.log('create adn write to the file');\n      \t\t\t\t\t\t\t\t\t\t\t\tdb.database.collection('files').insertOne(data, (err, result) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('inerted the doc successfully');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tconst object = {};\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.id = result.ops[0]._id;\n                                  console.log(result.ops[0]);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.userId = result.ops[0].userId.toString();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.name = result.ops[0].name;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.type = result.ops[0].type;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.isPublic = result.ops[0].isPublic;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.parentId = 0;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send(object);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send({ error: 'Error adding to the database' });\n      \t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\tfile.mkdir(path, { recurssive: true }, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\tconsole.log('provided folder does not exist');\n      \t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('provided folder created successfull');\n      \t\t\t\t\t\t\t\t\t\t\t\t\tfile.writeFile(`${path}/${v4().toString()}`, decryptedData, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('create adn write to the file');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.userId = userId;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data.isPublic === undefined) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.isPublic = false;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdb.database.collection('files').insertOne(data, (err, result) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('inserting to the collection');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst object = {};\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.id = result.ops[0]._id;\n                                        console.log(result.ops[0]);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.userId = result.ops[0].userId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.type = result.ops[0].type;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.name = result.ops[0].name;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.isPublic = result.ops[0].isPublic;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.parentId = 0;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send(object);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send({ error: 'Error adding to db' });\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t} else {\n                                // code for when the folder could not be created\n                                res.status(400).send({ error: 'file/folder error' });\n                              }\n                            });\n      \t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t// data missing\n\t\t\t\t\t\t\t\t\tres.status(400).send({error: \"Missing data\"});\n      \t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\tif (data.type === 'folder') {\n      \t\t\t\t\t\t\t\t\t\t\tfile.exists(`${path}/${data.name}`, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\tif (err) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('the provided folder exists');\n      \t\t\t\t\t\t\t\t\t\t\t\t\tdata.userId = userId;\n      \t\t\t\t\t\t\t\t\t\t\t\t\tdata.parentId = 0;\n      \t\t\t\t\t\t\t\t\t\t\t\t\tif (data.isPublic === undefined) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.isPublic = false;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\tdb.database.collection('files').insertOne(data, (err, result) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst object = {};\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.id = result.ops[0]._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.userId = result.ops[0].userId.toString();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.name = result.ops[0].name;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.type = result.ops[0].type;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.isPublic = result.ops[0].isPublic;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.parentId = result.ops[0].parentId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send(object);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// insertion error\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\tfile.mkdir(`${path}/${data.name}`, { recurssive: true }, (err) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('provided folder does not exist');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('provided folder created successfull');\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.userId = userId;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.parentId = 0;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data.isPublic === undefined) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata.isPublic = false;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdb.database.collection('files').insertOne(data, (err, result) => {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (err === null) {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst object = {};\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.id = result.ops[0]._id;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.userId = result.ops[0].userId.toString();\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.name = result.ops[0].name;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.type = result.ops[0].type;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.isPublic = result.ops[0].isPublic;\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tobject.parentId = result.ops[0].parentId.toString();\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tres.status(201).send(object);\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// insertion error\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n                              // code for when the folder could not be created\n\t\t\t\tconsole.log(err);\n                              res.status(400).send({ error: 'file/folder error' });\n                            }\n                          });\n      \t\t\t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\t\t});\n      \t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t\t\t\t\tif (data.type === 'image') {\n      \t\t\t\t\t\t\t\t\t\t\t// handle when the type is image and the parentId was not set\n      \t\t\t\t\t\t\t\t\t\t}\n      \t\t\t\t\t\t} else {\n      \t\t\t\t\t\t\t// type is not valid\n\t\t\t\t\t\t\tres.status(400).send({ error: 'Missing type' });\n      \t\t\t\t\t\t}\n      \t\t\t\t\t}\n      \t\t\t\t} else {\n      \t\t\t\t\t// name doesn not exists\n\t\t\t\t\tres.status(400).send({ error: 'Missing name' });\n      \t\t\t\t}\n      \t\t\t});\n      \t\t} else {\n      \t\t\t// when the login user could not be found in the db\n\t\t\tres.status(401).send({ error: 'Unauthorized' });\n      \t\t}\n      \t} else {\n      \t\t// no users\n\t\tres.status(401).send({ error: 'Unauthorized' });\n      \t}\n      });\n    } else {\n    \t// unauthorized\n\t    res.status(401).send({ error: 'Unauthorized' });\n    }\n  }\n}\nconst fileCtrlr = new FilesController();\nmodule.exports = fileCtrlr;\n"],"mappings":"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"}},"mtime":1709909703344}}